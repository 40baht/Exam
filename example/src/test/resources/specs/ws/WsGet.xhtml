<html xmlns:e="http://exam.extension.io" xmlns:cc="http://www.concordion.org/2007/concordion">
<body>
    <h1>GET</h1>

    <p class="lead">Specifying use cases of a <code>GET</code>-endpoint</p>

    <h2>Overview</h2>

    <e:set var="cmd" hidden="" value="e:get"/>
    <e:set var="cmdExample" hidden="">
    <![CDATA[
        <e:get url="/some/url" contentType="application/json">
            <!-- One or many cases -->
            <e:case desc="use-case 1" urlParams="param1=1">
                <!--  Expected response -->
                <e:expected statusCode="200">
                    { "response": "body" }
                </e:expected>
                <!-- Optional block for case specific checks -->
                <e:check>
                    <span c:assertTrue="true">Block for additional checks</span>
                </e:check>
            </e:case>
            <e:case desc="use-case 2" urlParams="param1=1&amp;param2=2">
                <e:expected from="/ws/response.json" statusCode="200"/>
            </e:case>
        </e:get>
    ]]>
    </e:set>
    <e:include from="/specs/includes/ws/usage.xml"/>

    <h3>Attributes</h3>
    <table class="table" style="table-layout: fixed;">
        <thead>
            <tr><th style="width: 180px;">attribute</th><th style="width: 300px;">desc</th><th>example</th></tr>
        </thead>
        <e:include from="/specs/includes/ws/attr-url.xml"/>
        <e:include from="/specs/includes/ws/attr-contentType.xml"/>
        <e:include from="/specs/includes/ws/attr-headers.xml"/>
        <e:include from="/specs/includes/ws/attr-cookies.xml"/>
        <e:include from="/specs/includes/ws/attr-caseDesc.xml"/>
        <e:include from="/specs/includes/ws/attr-caseUrlParams.xml"/>
        <e:include from="/specs/includes/ws/attr-caseExpected.xml"/>
    </table>

    <h2>Examples</h2>

    <h3>Query string</h3>
    <p>
        To specify case specific query string <code>case.urlParams</code> attribute may be used.
    </p>
    <e:example name="urlParams">
        <e:get url="mirror/request" print="true">
            <e:case desc="Request with single param" urlParams="param1=1">
                <e:expected>
                    { "GET": "/mirror/request?param1=1" }
                </e:expected>
            </e:case>
            <e:case desc="Request with several params" urlParams="param1=1&amp;param2=2">
                <e:expected>
                    { "GET": "/mirror/request?param1=1&amp;param2=2" }
                </e:expected>
            </e:case>
        </e:get>
    </e:example>

    <h2>How to</h2>
    <ul>
        <li><a cc:run="concordion" href="common/ContentTypes.xhtml">How to set Content-Type?</a></li>
        <li><a cc:run="concordion" href="common/ContentVerifiers.xhtml">How to verify different content types?</a></li>
        <li><a cc:run="concordion" href="common/Headers.xhtml">How to set headers?</a></li>
        <li><a cc:run="concordion" href="common/Cookies.xhtml">How to set cookies?</a></li>
        <li><a cc:run="concordion" href="common/Checks.xhtml">How to do case specific checks?</a></li>
        <li><a cc:run="concordion" href="common/Where.xhtml">How to turn case into parameterized test?</a></li>
    </ul>

</body>
</html>