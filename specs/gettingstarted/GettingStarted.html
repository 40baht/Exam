<?xml version="1.0" encoding="UTF-8"?><html xmlns:e="http://exam.extension.io" xmlns:cc="http://www.concordion.org/2007/concordion"><head><script type="text/javascript">document.addEventListener('DOMContentLoaded', function (event) {
    Array.from(document.getElementsByClassName("nomnoml")).forEach(function(el) {
        nomnoml.draw(el, el.textContent); 
    });  
});</script><script type="text/javascript">window.addEventListener('DOMContentLoaded', function (event) {
    anchors.options = {
        placement: 'left',
        icon: '#'
    };
    anchors.add();
    tocbot.init({
        tocSelector: '.js-toc',
        contentSelector: '.bd-content',
        headingSelector: 'h1, h2, h3, h4, h5, h6',
        hasInnerContainers: true,
        collapseDepth: 3,
        scrollSmooth: false,
        fixedSidebarOffset: 'auto',
        includeHtml: true
    });
    var collapseDepth = 3; 
    jQuery( "#example-summary-badge" ).click(function() {
        if (collapseDepth === 3) {
            collapseDepth = 30;
        } else {
            collapseDepth = 3;
        }
        tocbot.refresh({
            tocSelector: '.js-toc',
            contentSelector: '.bd-content',
            headingSelector: 'h1, h2, h3, h4, h5, h6',
            hasInnerContainers: true,
            collapseDepth: collapseDepth,
            scrollSmooth: false,
            fixedSidebarOffset: 'auto',
            includeHtml: true
        });
        if (collapseDepth === 30) {
            jQuery( ".toc-link" ).filter(function( index ) {
                return jQuery( "i", this ).length !== 1
            }).css("display", "none");
        } else {
            jQuery( ".toc-link" ).filter(function( index ) {
                return jQuery( "i", this ).length !== 1
            }).css("display", "unset");
        }
    });
}); </script><script type="text/javascript">document.addEventListener('DOMContentLoaded', function (event) {
    hljs.configure({
        cssSelector: 'pre code, pre.highlight'
    });
    hljs.highlightAll();
});</script><style>* {
  font-family: Arial;
}
body {
  padding: 32px;  
}
pre {
  padding: 6px 28px 6px 28px;
  background-color: #E8EEF7;
}
pre, pre *, code, code *, kbd {
  font-family: Courier New, Courier;
  font-size: 10pt;
}
h1, h1 * {
  font-size: 24pt;	
}
p, td, th, li, .breadcrumbs {
  font-size: 10pt;
}
p, li {
  line-height: 140%;
  max-width: 720px;
}
table {
  border-collapse: collapse;
  empty-cells: show;
  margin: 8px 0px 8px 0px;
}
th, td {
  border: 1px solid black;
  padding: 3px;
}
td {
  background-color: white;
  vertical-align: top;
}
th {
  background-color: #C3D9FF;
}
li {
  margin-top: 6px;
  margin-bottom: 6px; 
}

.example, :not(th)[cc\:example] {
  padding: 6px 16px 6px 16px;
  border: 1px solid #C3D9FF;
  margin: 6px 0px 28px 0px;
  background-color: #F5F9FD;
}
.example h3, [cc\:example] h3 {
  margin-top: 8px;
  margin-bottom: 8px;
  font-size: 12pt;
}

p.success {
  padding: 2px;
}
.success, .success * {
  background-color: #afa !important;
}
.success pre {
  background-color: #bbffbb;
}
.failure, .failure * {
  background-color: #ffb0b0;
  padding: 1px;
}
.failure .expected {
  text-decoration: line-through;
  color: #bb5050;
}
.ignored, .ignored * {
  background-color: #f0f0f0 !important;	
}

ins {
  text-decoration: none;	
}

.exceptionMessage {
  background-color: #fdd;
  font-family: Courier New, Courier, Monospace;
  font-size: 10pt;
  display: block;
  font-weight: normal;
  padding: 4px;
  text-decoration: none !important;
}
.stackTrace, .stackTrace * {
  font-weight: normal;
}
.stackTrace {
  display: none;
  padding: 1px 4px 4px 4px;
  background-color: #fdd;
  border-top: 1px dotted black;
}
.stackTraceExceptionMessage {
  display: block;
  font-family: Courier New, Courier, Monospace;
  font-size: 8pt;
  white-space: wrap;
  padding: 1px 0px 1px 0px;
}
.stackTraceEntry {
  white-space: nowrap;
  font-family: Courier New, Courier, Monospace;
  display: block;
  font-size: 8pt;
  padding: 1px 0px 1px 32px;
}
.stackTraceButton {
  font-size: 8pt;
  margin: 2px 8px 2px 0px;
  font-weight: normal;
  font-family: Arial;
}

.special {
  font-style: italic;
}
.missing, .missing * {
  background-color: #ff9999;
  color:#bb5050;
  text-decoration: line-through;
}
.surplus, .surplus * {
  background-color: #ff9999;
}
.footer {
  text-align: right;
  margin-top: 40px;
  font-size: 8pt;
  width: 100%;
  color: #999;
}
.footer .testTime {
  padding: 2px 10px 0px 0px;
}

.idea {
  font-size: 9pt;
  color: #888;
  font-style: italic;	
}
.tight li {
  margin-top: 1px;
  margin-bottom: 1px; 
}
.commentary {
  float: right;
  width: 200px;
  background-color: #ffffd0;
  padding:8px;
  border: 3px solid #eeeeb0;	 
  margin: 10px 0px 10px 10px;	 
}
.commentary, .commentary * {
  font-size: 8pt;
}
</style><meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<link type="text/css" rel="stylesheet" href="../../ext/codemirror/codemirror.css" /><link type="text/css" rel="stylesheet" href="../../ext/codemirror/enable-codemirror.css" /><link type="text/css" rel="stylesheet" href="../../ext/codemirror/merge.css" /><link type="text/css" rel="stylesheet" href="../../ext/codemirror/foldgutter.css" /><link type="text/css" rel="stylesheet" href="../../ext/codemirror/simplescrollbar.css" /><script type="text/javascript" src="../../ext/codemirror/codemirror.js"></script><script type="text/javascript" src="../../ext/codemirror/enable-codemirror.js"></script><script type="text/javascript" src="../../ext/codemirror/javascript.js"></script><script type="text/javascript" src="../../ext/codemirror/xml.js"></script><script type="text/javascript" src="../../ext/codemirror/addon/mode/simple.js"></script><script type="text/javascript" src="../../ext/codemirror/http.js"></script><script type="text/javascript" src="../../ext/codemirror/diff_match_patch.js"></script><script type="text/javascript" src="../../ext/codemirror/merge.js"></script><script type="text/javascript" src="../../ext/codemirror/xml-fold.js"></script><script type="text/javascript" src="../../ext/codemirror/simplescrollbar.js"></script><link type="text/css" rel="stylesheet" href="../../ext/highlight/stackoverflow-light.min.css" /><script type="text/javascript" src="../../ext/highlight/highlight.min.js"></script><script type="text/javascript" src="../../ext/highlight/http.min.js"></script><script type="text/javascript" src="../../ext/highlight/java.min.js"></script><link type="text/css" rel="stylesheet" href="../../ext/tocbot/tocbot.css" /><script type="text/javascript" src="../../ext/tocbot/tocbot.min.js"></script><link type="text/css" rel="stylesheet" href="../../ext/fontawesome/css/all.min.css" /><link type="text/css" rel="stylesheet" href="../../ext/fontawesome/css/regular.min.css" /><link type="text/css" rel="stylesheet" href="../../ext/fontawesome/css/solid.min.css" /><link type="text/css" rel="stylesheet" href="../../ext/fontawesome/css/all.min.css" /><link type="text/css" rel="stylesheet" href="../../ext/bootstrap/bootstrap.min.css" /><link type="text/css" rel="stylesheet" href="../../ext/bootstrap/enable-bootstrap.css" /><link type="text/css" rel="stylesheet" href="../../ext/bootstrap/doc.min.css" /><link type="text/css" rel="stylesheet" href="../../ext/bootstrap/scrollToTop.css" /><script type="text/javascript" src="../../ext/bootstrap/bootstrap.min.js"></script><script type="text/javascript" src="../../ext/bootstrap/jquery-3.2.1.slim.min.js"></script><script type="text/javascript" src="../../ext/bootstrap/sidebar.js"></script><script type="text/javascript" src="../../ext/bootstrap/doc.min.js"></script><script type="text/javascript" src="../../ext/bootstrap/scrollToTop.js"></script><script type="text/javascript" src="../../ext/nomnoml/graphre.js"></script><script type="text/javascript" src="../../ext/nomnoml/nomnoml.min.js"></script></head><body><span class="breadcrumbs"><a href="../Specs.html">Exam</a> &gt;</span><div class="container-fluid"><div class="container-xxl my-md-4 bd-layout"><main class="bd-main order-1"><div class="bd-toc mt-4 mb-5 my-md-0 ps-xl-3 mb-lg-5 text-muted"><div class="row my-2 pb-2 border-bottom"><div class="col-9"><strong class="h6">On this page</strong></div><div class="col-2"><i id="example-summary-badge" class="fa fa-list-check"></i></div></div><nav id="table-of-contents" class="js-toc toc toc-right" /></div><div class="bd-content ps-lg-4" id="content">
<h1>Getting started</h1>

<h2>Overview</h2>

<p>
    Given a simple <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a>
    web service for <i>widgets</i> management.
</p>
<figure class="figure">
    <canvas class="nomnoml container" from="/specs/gettingstarted/widgets.nomnoml">#.table: fill=#fff visual=table dashed
#.sut: fill=#0e0 bold
#.db: fill=#0e0 visual=database
#.api: fill=#0e0 visual=lollipop

#gravity: 2
#padding: 10
#spacing: 30
#direction: right

[&lt;sut&gt; Widgets Service]&lt;-&gt;[&lt;db&gt; DB]
[&lt;db&gt; DB]--[&lt;table&gt; Widgets| id | integer || name | varchar || quantity | integer || updated | datetime]

[&lt;actor&gt; client]--&gt;[&lt;api&gt; POST /widgets]
[&lt;actor&gt; client]--&gt;[&lt;api&gt; GET /widgets]
[&lt;actor&gt; client]--&gt;[&lt;api&gt; PUT /widgets]
[&lt;actor&gt; client]--&gt;[&lt;api&gt; DELETE /widgets/{id}]
[POST /widgets]-[Widgets Service]
[GET /widgets]-[Widgets Service]
[PUT /widgets]-[Widgets Service]
[DELETE /widgets/{id}]-[Widgets Service]</canvas>
    <figcaption class="figure-caption text-center">Widgets service</figcaption>
</figure>
<p>
    Widgets are stored in DB like this:
    <div cmdId="7123bf86-89f0-42be-bd78-43c723944ad2" e:db-show=""><div class="table-responsive mb-1 p-1"><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  WIDGETS</caption><thead class="thead-default"><tr><th class="">ID</th><th class="">NAME</th><th class="">QUANTITY</th><th class="">UPDATED</th></tr></thead><tbody><tr><td class=""><span>1</span></td><td class=""><span>widget one</span></td><td class=""><span>27</span></td><td class=""><span>2021-10-22 17:17:22.721</span></td></tr><tr><td class=""><span>2</span></td><td class=""><span>widget two</span></td><td class=""><span>14</span></td><td class=""><span>2021-10-22 17:17:22.734</span></td></tr></tbody></table></div></div>
</p>

<h2>Testing API</h2>

<h3>Creation API</h3>

<p>
    Let's illustrate the logic of the POST-endpoint with the basic happy-path example.
</p>
<div class="mb-4 mt-4"><mark>The following markup:</mark><pre class="doc-code language-xml mt-2"><code>&lt;e:example name="Successful widget creation"&gt;
    &lt;e:given&gt;
        &lt;e:db-set caption="There are no widgets" table="WIDGETS"/&gt;
    &lt;/e:given&gt;
    &lt;e:then&gt;
        &lt;e:post url="/widgets"&gt;
            &lt;e:case desc="Successful creation"&gt;
                &lt;e:body&gt; {"name" : "widget1", "quantity": "10"} &lt;/e:body&gt;
                &lt;e:expected statusCode="201" reasonPhrase="Created"&gt; { "id": "{{number}}", "name": "widget1", "quantity": 10, "updatedAt": "{{formattedAndWithinNow "yyyy-MM-dd'T'HH:mm:ss.SSS" "5s"}}" } &lt;/e:expected&gt;
                &lt;e:check&gt;
                    &lt;e:db-check caption="Widget was created:" table="widgets" cols="id, name, quantity, updated" orderBy="name"&gt;
                        &lt;e:row&gt;!{number}, widget1, 10, !{within 5s}&lt;/e:row&gt;
                    &lt;/e:db-check&gt;
                    &lt;p&gt; or the same but with 
                        &lt;var&gt;regex&lt;/var&gt; and 
                        &lt;var&gt;not null&lt;/var&gt; matchers: 
                    &lt;/p&gt;
                    &lt;e:db-check caption="Widget was created:" table="widgets" cols="id, name, quantity, updated" orderBy="name"&gt;
                        &lt;e:row&gt;!{regex}\d, widget1, 10, !{notNull}&lt;/e:row&gt;
                    &lt;/e:db-check&gt;
                &lt;/e:check&gt;
            &lt;/e:case&gt;
        &lt;/e:post&gt;
    &lt;/e:then&gt;
&lt;/e:example&gt;</code></pre><mark>will be rendered as:</mark></div><div xmlns:c="http://www.concordion.org/2007/concordion" name="Successful widget creation" print="true" cmdId="65f9cf91-8bb6-4a65-b130-a22341b62d7e" c:example="Successful widget creation" c:status="ExpectedToPass" class="exam-example mb-3" data-type="example" e:example="" id="Successful widget creation" data-summary-success="10" data-summary-ignore="0" data-summary-failure="0" data-summary-exception="0" data-summary-status="ExpectedToPass"><div data-bs-toggle="collapse" data-bs-target="#e3b6e43de-38ae-4cae-b632-d41875d21a88" aria-expanded="true"><h4 style="visibility: hidden; height:0;" class="test-class"><i class="example-badge fa fa-check m-1 text-success"></i>Successful widget creation</h4><i class="far fa-caret-square-down"></i><span> </span><a class="bd-example-title text-muted fw-lighter">Successful widget creation</a></div><div class="bd-example collapse show rounded bg-light bg-gradient" id="e3b6e43de-38ae-4cae-b632-d41875d21a88">

    <div cmdId="22f2dd11-2933-4645-bb49-d4eee12f802b" e:given="" class="given"><p class="lead text-primary">Given</p><hr />
        <div cmdId="a80e7adf-abe0-4fff-abe6-1864c6126eed" e:db-set="" class="table table-sm table-hover"><div class="table-responsive mb-1 p-1"><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  There are no widgets</caption><thead class="thead-default"><tr><th /></tr></thead><tbody><tr><td colspan="0">EMPTY</td></tr></tbody></table></div></div>
    </div>

    <div cmdId="5e721d40-221f-4be7-81a8-a87b802bfbca" e:then="" class="then"><p class="lead text-success">Then</p><hr />
        <div cmdId="258b66d5-d0cb-4d1e-8af8-c87b5af96cad" e:post=""><table class="ws-cases table table-sm caption-top"><div><div class="input-group mb-1 mt-1">
        <span class="input-group-text bg-success text-white">POST</span>
        <span class="form-control bg-light text-primary font-weight-light" id="endpoint--537028050">/widgets</span>
    </div><div class="input-group input-group-sm">
        <span class="input-group-text">Content-Type</span>
        <span id="header-556531473" class="form-control bg-light text-dark font-weight-light">application/json</span>
    </div></div><thead class="thead-default"><th colspan="2" style="text-align:center;" class="text-secondary">Use cases:</th></thead>
            <tr desc="Successful creation" cmdId="4c52e590-b366-43c4-83ff-dfcfc913da3b" e:case="" data-type="case" id="1) Successful creation"><tr><td colspan="2" class="text-muted bg-light" style="border-bottom: 1px solid lightgray;">1) Successful creation</td></tr>
                
                
                <div cmdId="d83fd0ea-d137-4eb2-a2b1-a15b37551669" e:check="" />
            <tr data-case-title="single"><td style="width: 50%;"><div class="httpstyle"><pre class="doc-code language-http"><code>POST /widgets HTTP/1.1
</code></pre></div></td><td style="padding-left: 0;"><small><span class="exp-status rest-success">HTTP/1.1 201 Created</span><span class="badge badge-pill badge-light">124ms</span></small></td></tr><tr><td class="json exp-body" style="min-width: 20%; width: 50%;">{
  "name": "widget1",
  "quantity": "10"
}</td><td colspan="1" class="exp-body"><div>
        <nav>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation"> 
                <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1634912250100-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1634912250100" aria-controls="nav-et-1634912250100" aria-selected="true">Expected</button>
            </li>
            <li class="nav-item" role="presentation"> 
                <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1634912250100-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1634912250100" aria-controls="nav-at-1634912250100" aria-selected="false">Actual</button>
            </li>
          </ul>
        </nav>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="nav-et-1634912250100" role="tabpanel" aria-labelledby="nav-et-1634912250100-tab">
            <pre id="e-1634912250100" class="rest-success json">{
  "id": "${json-unit.any-number}",
  "name": "widget1",
  "quantity": 10,
  "updatedAt": "${json-unit.matches:formattedAndWithinNow}[yyyy-MM-dd'T'HH:mm:ss.SSS][5s]"
}</pre>
          </div>
          <div class="tab-pane fade" id="nav-at-1634912250100" role="tabpanel" aria-labelledby="nav-at-1634912250100-tab">
            <pre id="a-1634912250100" class="rest-success json">{
  "id": 3,
  "name": "widget1",
  "quantity": 10,
  "updatedAt": "2021-10-22T17:17:29.994"
}</pre>
          </div>
        </div>
    </div></td></tr></tr><tr><td colspan="2">
                    <div cmdId="827315f7-0e9f-4120-92fb-630b94375d79" e:db-check="" class="table table-sm table-hover db-check">
                        
                    <div class="table-responsive mb-1 p-1"><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  Widget was created:</caption><thead class="thead-default"><tr><th class="">ID</th><th class="">NAME</th><th class="">QUANTITY</th><th class="">UPDATED</th></tr></thead><tbody><tr><td class=" table-success"> <span>!{number} (3)</span></td><td class=" table-success"> <span>widget1</span></td><td class=" table-success"> <span>10</span></td><td class=" table-success"> <span>!{within 5s} (2021-10-22 17:17:29.994)</span></td></tr></tbody></table></div></div>
                    <p>
                        or the same but with <var>regex</var> and <var>not null</var> matchers:
                    </p>
                    <div cmdId="78a7aa2e-f1aa-47b3-b915-e3c2792e4be6" e:db-check="" class="table table-sm table-hover db-check">
                        
                    <div class="table-responsive mb-1 p-1"><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  Widget was created:</caption><thead class="thead-default"><tr><th class="">ID</th><th class="">NAME</th><th class="">QUANTITY</th><th class="">UPDATED</th></tr></thead><tbody><tr><td class=" table-success"> <span>!{regex}\d (3)</span></td><td class=" table-success"> <span>widget1</span></td><td class=" table-success"> <span>10</span></td><td class=" table-success"> <span>!{notNull} (2021-10-22 17:17:29.994)</span></td></tr></tbody></table></div></div>
                </td></tr>
        </table></div>
    </div>

</div></div>

<p>
    Request has required fields. Invalid request should return error description.
</p>
<div class="mb-4 mt-4"><mark>The following markup:</mark><pre class="doc-code language-xml mt-2"><code>&lt;e:example name="Validation"&gt;
    &lt;e:given&gt;
        &lt;e:db-set caption="There are no widgets" table="widgets"/&gt;
    &lt;/e:given&gt;
    &lt;e:then&gt;
        &lt;e:post url="/widgets"&gt;
            &lt;e:case desc="quantity is required"&gt;
                &lt;e:body&gt; {"name": "widget1"} &lt;/e:body&gt;
                &lt;e:expected statusCode="400" reasonPhrase="Bad Request"&gt; { "error": "quantity is required" } &lt;/e:expected&gt;
            &lt;/e:case&gt;
            &lt;e:case desc="name is required"&gt;
                &lt;e:body&gt; {"quantity": "10"} &lt;/e:body&gt;
                &lt;e:expected statusCode="400" reasonPhrase="Bad Request"&gt; { "error": "name is required" } &lt;/e:expected&gt;
            &lt;/e:case&gt;
            &lt;e:case desc="name should't be blank or more than 10 symbols"&gt;
                &lt;e:body&gt; {"name": "{{invalid}}", "quantity": "10"} &lt;/e:body&gt;
                &lt;e:expected statusCode="400" reasonPhrase="Bad Request"&gt; { "error": "{{error}}" } &lt;/e:expected&gt;
                &lt;e:where vars="invalid, error"&gt;
                    &lt;e:vals&gt;'' , blank value not allowed&lt;/e:vals&gt;
                    &lt;e:vals&gt;more_than_10, Value 'more_than_10' can't be stored to database column because exceeds length (10)&lt;/e:vals&gt;
                &lt;/e:where&gt;
            &lt;/e:case&gt;
            &lt;e:check&gt;
                &lt;e:db-check caption="No widgets were created:" table="widgets"/&gt;
            &lt;/e:check&gt;
        &lt;/e:post&gt;
    &lt;/e:then&gt;
&lt;/e:example&gt;</code></pre><mark>will be rendered as:</mark></div><div xmlns:c="http://www.concordion.org/2007/concordion" name="Validation" print="true" cmdId="b8b3b6f5-086e-4da6-bb4a-132e0577e0ba" c:example="Validation" c:status="ExpectedToPass" class="exam-example mb-3" data-type="example" e:example="" id="Validation" data-summary-success="9" data-summary-ignore="0" data-summary-failure="0" data-summary-exception="0" data-summary-status="ExpectedToPass"><div data-bs-toggle="collapse" data-bs-target="#ebacb9bb9-91ab-4637-9d29-1fed8ce509e4" aria-expanded="true"><h4 style="visibility: hidden; height:0;" class="test-class"><i class="example-badge fa fa-check m-1 text-success"></i>Validation</h4><i class="far fa-caret-square-down"></i><span> </span><a class="bd-example-title text-muted fw-lighter">Validation</a></div><div class="bd-example collapse show rounded bg-light bg-gradient" id="ebacb9bb9-91ab-4637-9d29-1fed8ce509e4">

    <div cmdId="56ec3aac-c9d6-491c-996d-09ecf2bc4600" e:given="" class="given"><p class="lead text-primary">Given</p><hr />
        <div cmdId="215ad58e-774a-40b2-af3a-283dd6850b75" e:db-set="" class="table table-sm table-hover"><div class="table-responsive mb-1 p-1"><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  There are no widgets</caption><thead class="thead-default"><tr><th /></tr></thead><tbody><tr><td colspan="0">EMPTY</td></tr></tbody></table></div></div>
    </div>

    <div cmdId="f58364e0-2883-4bfe-8c2a-a361a6e54ee6" e:then="" class="then"><p class="lead text-success">Then</p><hr />
        <div cmdId="c37c9772-c98f-4a82-8aec-4f4b8faa29dc" e:post=""><table class="ws-cases table table-sm caption-top"><div><div class="input-group mb-1 mt-1">
        <span class="input-group-text bg-success text-white">POST</span>
        <span class="form-control bg-light text-primary font-weight-light" id="endpoint--1264078818">/widgets</span>
    </div><div class="input-group input-group-sm">
        <span class="input-group-text">Content-Type</span>
        <span id="header-1063906162" class="form-control bg-light text-dark font-weight-light">application/json</span>
    </div></div><thead class="thead-default"><th colspan="2" style="text-align:center;" class="text-secondary">Use cases:</th></thead>
            <tr desc="quantity is required" cmdId="84ec2c07-8c4a-4319-936f-bbc91145d975" e:case="" data-type="case" id="2) quantity is required"><tr><td colspan="2" class="text-muted bg-light" style="border-bottom: 1px solid lightgray;">2) quantity is required</td></tr>
                
                
            <tr data-case-title="single"><td style="width: 50%;"><div class="httpstyle"><pre class="doc-code language-http"><code>POST /widgets HTTP/1.1
</code></pre></div></td><td style="padding-left: 0;"><small><span class="exp-status rest-success">HTTP/1.1 400 Bad Request</span><span class="badge badge-pill badge-light">17ms</span></small></td></tr><tr><td class="json exp-body" style="min-width: 20%; width: 50%;">{
  "name": "widget1"
}</td><td colspan="1" class="exp-body"><div>
        <nav>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation"> 
                <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1634912250128-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1634912250128" aria-controls="nav-et-1634912250128" aria-selected="true">Expected</button>
            </li>
            <li class="nav-item" role="presentation"> 
                <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1634912250128-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1634912250128" aria-controls="nav-at-1634912250128" aria-selected="false">Actual</button>
            </li>
          </ul>
        </nav>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="nav-et-1634912250128" role="tabpanel" aria-labelledby="nav-et-1634912250128-tab">
            <pre id="e-1634912250128" class="rest-success json">{
  "error": "quantity is required"
}</pre>
          </div>
          <div class="tab-pane fade" id="nav-at-1634912250128" role="tabpanel" aria-labelledby="nav-at-1634912250128-tab">
            <pre id="a-1634912250128" class="rest-success json">{
  "error": "quantity is required"
}</pre>
          </div>
        </div>
    </div></td></tr></tr>
            <tr desc="name is required" cmdId="b64aa9ee-9c6f-442c-9652-caf8d7f36202" e:case="" data-type="case" id="3) name is required"><tr><td colspan="2" class="text-muted bg-light" style="border-bottom: 1px solid lightgray;">3) name is required</td></tr>
                
                
            <tr data-case-title="single"><td style="width: 50%;"><div class="httpstyle"><pre class="doc-code language-http"><code>POST /widgets HTTP/1.1
</code></pre></div></td><td style="padding-left: 0;"><small><span class="exp-status rest-success">HTTP/1.1 400 Bad Request</span><span class="badge badge-pill badge-light">12ms</span></small></td></tr><tr><td class="json exp-body" style="min-width: 20%; width: 50%;">{
  "quantity": "10"
}</td><td colspan="1" class="exp-body"><div>
        <nav>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation"> 
                <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1634912250145-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1634912250145" aria-controls="nav-et-1634912250145" aria-selected="true">Expected</button>
            </li>
            <li class="nav-item" role="presentation"> 
                <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1634912250145-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1634912250145" aria-controls="nav-at-1634912250145" aria-selected="false">Actual</button>
            </li>
          </ul>
        </nav>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="nav-et-1634912250145" role="tabpanel" aria-labelledby="nav-et-1634912250145-tab">
            <pre id="e-1634912250145" class="rest-success json">{
  "error": "name is required"
}</pre>
          </div>
          <div class="tab-pane fade" id="nav-at-1634912250145" role="tabpanel" aria-labelledby="nav-at-1634912250145-tab">
            <pre id="a-1634912250145" class="rest-success json">{
  "error": "name is required"
}</pre>
          </div>
        </div>
    </div></td></tr></tr>
            <tr desc="name should't be blank or more than 10 symbols" cmdId="c4744f3e-1eb2-4825-a329-9cc6f3cb9bfe" e:case="" data-type="case" id="4) name should't be blank or more than 10 symbols"><tr><td colspan="2" class="text-muted bg-light" style="border-bottom: 1px solid lightgray;">4) name should't be blank or more than 10 symbols</td></tr>
                
                
                
            </tr><tr><td colspan="2"><div><nav><ul class="nav nav-tabs" role="tablist"><li class="nav-item"><button id="nav--1471384047-1634912250201-tab" data-bs-toggle="tab" data-bs-target="#nav--1471384047-1634912250201" role="tab" aria-controls="nav--1471384047-1634912250201" aria-selected="false" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" class="nav-link small text-success  active show">1</button></li><li class="nav-item"><button id="nav-1277467508-1634912250201-tab" class="nav-link small text-success " data-bs-toggle="tab" data-bs-target="#nav-1277467508-1634912250201" role="tab" aria-controls="nav-1277467508-1634912250201" aria-selected="false" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)">2</button></li></ul></nav><div><div class="tab-content"><div id="nav--1471384047-1634912250201" role="tabpanel" aria-labelledby="nav--1471384047-1634912250201-tab" class="tab-pane fade active show"><table class="table table-sm caption-top"><tr data-case-title="1"><td style="width: 50%;"><div class="httpstyle"><pre class="doc-code language-http"><code>POST /widgets HTTP/1.1
</code></pre></div></td><td style="padding-left: 0;"><small><span class="exp-status rest-success">HTTP/1.1 400 Bad Request</span><span class="badge badge-pill badge-light">20ms</span></small></td></tr><tr><td class="json exp-body" style="min-width: 20%; width: 50%;">{
  "name": "",
  "quantity": "10"
}</td><td colspan="1" class="exp-body"><div>
        <nav>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation"> 
                <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1634912250177-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1634912250177" aria-controls="nav-et-1634912250177" aria-selected="true">Expected</button>
            </li>
            <li class="nav-item" role="presentation"> 
                <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1634912250177-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1634912250177" aria-controls="nav-at-1634912250177" aria-selected="false">Actual</button>
            </li>
          </ul>
        </nav>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="nav-et-1634912250177" role="tabpanel" aria-labelledby="nav-et-1634912250177-tab">
            <pre id="e-1634912250177" class="rest-success json">{
  "error": "blank value not allowed"
}</pre>
          </div>
          <div class="tab-pane fade" id="nav-at-1634912250177" role="tabpanel" aria-labelledby="nav-at-1634912250177-tab">
            <pre id="a-1634912250177" class="rest-success json">{
  "error": "blank value not allowed"
}</pre>
          </div>
        </div>
    </div></td></tr></table></div><div class="tab-pane fade" id="nav-1277467508-1634912250201" role="tabpanel" aria-labelledby="nav-1277467508-1634912250201-tab"><table class="table table-sm caption-top"><tr data-case-title="2"><td style="width: 50%;"><div class="httpstyle"><pre class="doc-code language-http"><code>POST /widgets HTTP/1.1
</code></pre></div></td><td style="padding-left: 0;"><small><span class="exp-status rest-success">HTTP/1.1 400 Bad Request</span><span class="badge badge-pill badge-light">14ms</span></small></td></tr><tr><td class="json exp-body" style="min-width: 20%; width: 50%;">{
  "name": "more_than_10",
  "quantity": "10"
}</td><td colspan="1" class="exp-body"><div>
        <nav>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation"> 
                <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1634912250199-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1634912250199" aria-controls="nav-et-1634912250199" aria-selected="true">Expected</button>
            </li>
            <li class="nav-item" role="presentation"> 
                <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1634912250199-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1634912250199" aria-controls="nav-at-1634912250199" aria-selected="false">Actual</button>
            </li>
          </ul>
        </nav>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="nav-et-1634912250199" role="tabpanel" aria-labelledby="nav-et-1634912250199-tab">
            <pre id="e-1634912250199" class="rest-success json">{
  "error": "Value 'more_than_10' can't be stored to database column because exceeds length (10)"
}</pre>
          </div>
          <div class="tab-pane fade" id="nav-at-1634912250199" role="tabpanel" aria-labelledby="nav-at-1634912250199-tab">
            <pre id="a-1634912250199" class="rest-success json">{
  "error": "Value 'more_than_10' can't be stored to database column because exceeds length (10)"
}</pre>
          </div>
        </div>
    </div></td></tr></table></div></div></div></div></td></tr>
            <div cmdId="a1e74fe2-af05-4289-a4e8-61352937af58" e:check="" />
        </table><tr><td colspan="2">
                <div cmdId="a26966fd-f832-4490-a0ae-e35882fc5b12" e:db-check="" class="table table-sm table-hover db-check"><div class="table-responsive mb-1 p-1"><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  No widgets were created:</caption><thead class="thead-default"><tr><th /></tr></thead><tbody><tr><td colspan="4" class="table-success">EMPTY</td></tr></tbody></table></div></div>
            </td></tr></div>
    </div>

</div></div>

<p>
    Or more compact equivalent of previous example (request/response body templates are stored in files):
</p>
<div class="mb-4 mt-4"><mark>The following markup:</mark><pre class="doc-code language-xml mt-2"><code>&lt;e:example name="Validate - parametrized"&gt;
    &lt;e:given&gt;
        &lt;e:db-set caption="There are no widgets" table="widgets"/&gt;
    &lt;/e:given&gt;
    &lt;e:then&gt;
        &lt;e:post url="/widgets"&gt;
            &lt;e:case desc="Name and quantity validation"&gt;
                &lt;e:body from="/data/getting-started/{{req}}"/&gt;
                &lt;e:expected from="/data/getting-started/error.json" statusCode="400" reasonPhrase="Bad Request"/&gt;
                &lt;e:where vars="name, req, error"&gt;
                    &lt;e:vals&gt;ignored , invalid-no-name.json , name is required&lt;/e:vals&gt;
                    &lt;e:vals&gt;ignored , invalid-no-quantity.json, quantity is required&lt;/e:vals&gt;
                    &lt;e:vals&gt;'' , create-req.json , blank value not allowed&lt;/e:vals&gt;
                    &lt;e:vals&gt;more_than_10, create-req.json , Value 'more_than_10' can't be stored to database column because exceeds length (10)&lt;/e:vals&gt;
                &lt;/e:where&gt;
            &lt;/e:case&gt;
            &lt;e:check&gt;
                &lt;e:db-check caption="No widgets were created:" table="widgets"/&gt;
            &lt;/e:check&gt;
        &lt;/e:post&gt;
    &lt;/e:then&gt;
&lt;/e:example&gt;</code></pre><mark>will be rendered as:</mark></div><div xmlns:c="http://www.concordion.org/2007/concordion" name="Validate - parametrized" print="true" cmdId="b9adaebe-a7c9-440f-9d82-9b2b98a57b91" c:example="Validate - parametrized" c:status="ExpectedToPass" class="exam-example mb-3" data-type="example" e:example="" id="Validate - parametrized" data-summary-success="9" data-summary-ignore="0" data-summary-failure="0" data-summary-exception="0" data-summary-status="ExpectedToPass"><div data-bs-toggle="collapse" data-bs-target="#e20bcab8c-0098-4484-9dc4-78d39e1e3f7b" aria-expanded="true"><h4 style="visibility: hidden; height:0;" class="test-class"><i class="example-badge fa fa-check m-1 text-success"></i>Validate - parametrized</h4><i class="far fa-caret-square-down"></i><span> </span><a class="bd-example-title text-muted fw-lighter">Validate - parametrized</a></div><div class="bd-example collapse show rounded bg-light bg-gradient" id="e20bcab8c-0098-4484-9dc4-78d39e1e3f7b">

    <div cmdId="6d065e2e-f934-4628-ab26-8023af186206" e:given="" class="given"><p class="lead text-primary">Given</p><hr />
        <div cmdId="d399ba46-6731-42e6-a3f0-ba64e0d0fb24" e:db-set="" class="table table-sm table-hover"><div class="table-responsive mb-1 p-1"><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  There are no widgets</caption><thead class="thead-default"><tr><th /></tr></thead><tbody><tr><td colspan="0">EMPTY</td></tr></tbody></table></div></div>
    </div>

    <div cmdId="d9b24663-0b5a-4fd3-8866-140dc6e2a100" e:then="" class="then"><p class="lead text-success">Then</p><hr />
        <div cmdId="94a48082-5c51-4ea3-9746-1ee1815cfc80" e:post=""><table class="ws-cases table table-sm caption-top"><div><div class="input-group mb-1 mt-1">
        <span class="input-group-text bg-success text-white">POST</span>
        <span class="form-control bg-light text-primary font-weight-light" id="endpoint--548798426">/widgets</span>
    </div><div class="input-group input-group-sm">
        <span class="input-group-text">Content-Type</span>
        <span id="header--1697008431" class="form-control bg-light text-dark font-weight-light">application/json</span>
    </div></div><thead class="thead-default"><th colspan="2" style="text-align:center;" class="text-secondary">Use cases:</th></thead>
            <tr desc="Name and quantity validation" cmdId="819295f2-cd15-47a4-90f8-ce176db42437" e:case="" data-type="case" id="5) Name and quantity validation"><tr><td colspan="2" class="text-muted bg-light" style="border-bottom: 1px solid lightgray;">5) Name and quantity validation</td></tr>
                
                
                
            </tr><tr><td colspan="2"><div><nav><ul class="nav nav-tabs" role="tablist"><li class="nav-item"><button id="nav-2018367100-1634912250295-tab" data-bs-toggle="tab" data-bs-target="#nav-2018367100-1634912250295" role="tab" aria-controls="nav-2018367100-1634912250295" aria-selected="false" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" class="nav-link small text-success  active show">1</button></li><li class="nav-item"><button id="nav--287163850-1634912250295-tab" class="nav-link small text-success " data-bs-toggle="tab" data-bs-target="#nav--287163850-1634912250295" role="tab" aria-controls="nav--287163850-1634912250295" aria-selected="false" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)">2</button></li><li class="nav-item"><button id="nav--810486455-1634912250295-tab" class="nav-link small text-success " data-bs-toggle="tab" data-bs-target="#nav--810486455-1634912250295" role="tab" aria-controls="nav--810486455-1634912250295" aria-selected="false" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)">3</button></li><li class="nav-item"><button id="nav-1431581543-1634912250295-tab" class="nav-link small text-success " data-bs-toggle="tab" data-bs-target="#nav-1431581543-1634912250295" role="tab" aria-controls="nav-1431581543-1634912250295" aria-selected="false" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)">4</button></li></ul></nav><div><div class="tab-content"><div id="nav-2018367100-1634912250295" role="tabpanel" aria-labelledby="nav-2018367100-1634912250295-tab" class="tab-pane fade active show"><table class="table table-sm caption-top"><tr data-case-title="1"><td style="width: 50%;"><div class="httpstyle"><pre class="doc-code language-http"><code>POST /widgets HTTP/1.1
</code></pre></div></td><td style="padding-left: 0;"><small><span class="exp-status rest-success">HTTP/1.1 400 Bad Request</span><span class="badge badge-pill badge-light">20ms</span></small></td></tr><tr><td from="/data/getting-started/{{req}}" class="json exp-body" style="min-width: 20%; width: 50%;">{
  "quantity": "10"
}</td><td colspan="1" class="exp-body" from="/data/getting-started/error.json"><div>
        <nav>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation"> 
                <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1634912250242-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1634912250242" aria-controls="nav-et-1634912250242" aria-selected="true">Expected</button>
            </li>
            <li class="nav-item" role="presentation"> 
                <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1634912250242-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1634912250242" aria-controls="nav-at-1634912250242" aria-selected="false">Actual</button>
            </li>
          </ul>
        </nav>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="nav-et-1634912250242" role="tabpanel" aria-labelledby="nav-et-1634912250242-tab">
            <pre id="e-1634912250242" class="rest-success json">{
  "error": "name is required"
}</pre>
          </div>
          <div class="tab-pane fade" id="nav-at-1634912250242" role="tabpanel" aria-labelledby="nav-at-1634912250242-tab">
            <pre id="a-1634912250242" class="rest-success json">{
  "error": "name is required"
}</pre>
          </div>
        </div>
    </div></td></tr></table></div><div class="tab-pane fade" id="nav--287163850-1634912250295" role="tabpanel" aria-labelledby="nav--287163850-1634912250295-tab"><table class="table table-sm caption-top"><tr data-case-title="2"><td style="width: 50%;"><div class="httpstyle"><pre class="doc-code language-http"><code>POST /widgets HTTP/1.1
</code></pre></div></td><td style="padding-left: 0;"><small><span class="exp-status rest-success">HTTP/1.1 400 Bad Request</span><span class="badge badge-pill badge-light">13ms</span></small></td></tr><tr><td from="/data/getting-started/{{req}}" class="json exp-body" style="min-width: 20%; width: 50%;">{
  "name": "widget1"
}</td><td colspan="1" class="exp-body" from="/data/getting-started/error.json"><div>
        <nav>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation"> 
                <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1634912250259-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1634912250259" aria-controls="nav-et-1634912250259" aria-selected="true">Expected</button>
            </li>
            <li class="nav-item" role="presentation"> 
                <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1634912250259-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1634912250259" aria-controls="nav-at-1634912250259" aria-selected="false">Actual</button>
            </li>
          </ul>
        </nav>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="nav-et-1634912250259" role="tabpanel" aria-labelledby="nav-et-1634912250259-tab">
            <pre id="e-1634912250259" class="rest-success json">{
  "error": "quantity is required"
}</pre>
          </div>
          <div class="tab-pane fade" id="nav-at-1634912250259" role="tabpanel" aria-labelledby="nav-at-1634912250259-tab">
            <pre id="a-1634912250259" class="rest-success json">{
  "error": "quantity is required"
}</pre>
          </div>
        </div>
    </div></td></tr></table></div><div class="tab-pane fade" id="nav--810486455-1634912250295" role="tabpanel" aria-labelledby="nav--810486455-1634912250295-tab"><table class="table table-sm caption-top"><tr data-case-title="3"><td style="width: 50%;"><div class="httpstyle"><pre class="doc-code language-http"><code>POST /widgets HTTP/1.1
</code></pre></div></td><td style="padding-left: 0;"><small><span class="exp-status rest-success">HTTP/1.1 400 Bad Request</span><span class="badge badge-pill badge-light">14ms</span></small></td></tr><tr><td from="/data/getting-started/{{req}}" class="json exp-body" style="min-width: 20%; width: 50%;">{
  "name": "",
  "quantity": "10"
}</td><td colspan="1" class="exp-body" from="/data/getting-started/error.json"><div>
        <nav>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation"> 
                <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1634912250278-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1634912250278" aria-controls="nav-et-1634912250278" aria-selected="true">Expected</button>
            </li>
            <li class="nav-item" role="presentation"> 
                <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1634912250278-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1634912250278" aria-controls="nav-at-1634912250278" aria-selected="false">Actual</button>
            </li>
          </ul>
        </nav>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="nav-et-1634912250278" role="tabpanel" aria-labelledby="nav-et-1634912250278-tab">
            <pre id="e-1634912250278" class="rest-success json">{
  "error": "blank value not allowed"
}</pre>
          </div>
          <div class="tab-pane fade" id="nav-at-1634912250278" role="tabpanel" aria-labelledby="nav-at-1634912250278-tab">
            <pre id="a-1634912250278" class="rest-success json">{
  "error": "blank value not allowed"
}</pre>
          </div>
        </div>
    </div></td></tr></table></div><div class="tab-pane fade" id="nav-1431581543-1634912250295" role="tabpanel" aria-labelledby="nav-1431581543-1634912250295-tab"><table class="table table-sm caption-top"><tr data-case-title="4"><td style="width: 50%;"><div class="httpstyle"><pre class="doc-code language-http"><code>POST /widgets HTTP/1.1
</code></pre></div></td><td style="padding-left: 0;"><small><span class="exp-status rest-success">HTTP/1.1 400 Bad Request</span><span class="badge badge-pill badge-light">10ms</span></small></td></tr><tr><td from="/data/getting-started/{{req}}" class="json exp-body" style="min-width: 20%; width: 50%;">{
  "name": "more_than_10",
  "quantity": "10"
}</td><td colspan="1" class="exp-body" from="/data/getting-started/error.json"><div>
        <nav>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation"> 
                <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1634912250293-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1634912250293" aria-controls="nav-et-1634912250293" aria-selected="true">Expected</button>
            </li>
            <li class="nav-item" role="presentation"> 
                <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1634912250293-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1634912250293" aria-controls="nav-at-1634912250293" aria-selected="false">Actual</button>
            </li>
          </ul>
        </nav>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="nav-et-1634912250293" role="tabpanel" aria-labelledby="nav-et-1634912250293-tab">
            <pre id="e-1634912250293" class="rest-success json">{
  "error": "Value 'more_than_10' can't be stored to database column because exceeds length (10)"
}</pre>
          </div>
          <div class="tab-pane fade" id="nav-at-1634912250293" role="tabpanel" aria-labelledby="nav-at-1634912250293-tab">
            <pre id="a-1634912250293" class="rest-success json">{
  "error": "Value 'more_than_10' can't be stored to database column because exceeds length (10)"
}</pre>
          </div>
        </div>
    </div></td></tr></table></div></div></div></div></td></tr>
            <div cmdId="12727441-4ad6-4537-95e8-773bfdbfc14c" e:check="" />
        </table><tr><td colspan="2">
                <div cmdId="b5590897-0554-4b07-b222-bfdbd45020e3" e:db-check="" class="table table-sm table-hover db-check"><div class="table-responsive mb-1 p-1"><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  No widgets were created:</caption><thead class="thead-default"><tr><th /></tr></thead><tbody><tr><td colspan="4" class="table-success">EMPTY</td></tr></tbody></table></div></div>
            </td></tr></div>
    </div>

</div></div>

<h3>Deletion API</h3>

<p>
    Widget can be deleted by <code>id</code>.
</p>
<div class="mb-4 mt-4"><mark>The following markup:</mark><pre class="doc-code language-xml mt-2"><code>&lt;e:example name="Successful widget deletion"&gt;
    &lt;e:given&gt;
        &lt;e:db-set caption="Given widget:" table="widgets" cols="name, quantity, id=1, updated={{now}}"&gt;
            &lt;e:row&gt;widget1, 10&lt;/e:row&gt;
        &lt;/e:db-set&gt;
    &lt;/e:given&gt;
    &lt;e:then&gt;
        &lt;e:delete url="/widgets/1"&gt;
            &lt;e:case desc="Successful deletion"&gt;
                &lt;e:expected/&gt;
                &lt;e:check&gt;
                    &lt;e:db-check caption="Widget was deleted:" table="widgets"/&gt;
                &lt;/e:check&gt;
            &lt;/e:case&gt;
            &lt;e:case desc="Absent widget deletion"&gt;
                &lt;e:expected statusCode="404" reasonPhrase="Not Found"/&gt;
            &lt;/e:case&gt;
        &lt;/e:delete&gt;
    &lt;/e:then&gt;
&lt;/e:example&gt;</code></pre><mark>will be rendered as:</mark></div><div xmlns:c="http://www.concordion.org/2007/concordion" name="Successful widget deletion" print="true" cmdId="e365df60-da1b-4918-9102-4e5915c4a38a" c:example="Successful widget deletion" c:status="ExpectedToPass" class="exam-example mb-3" data-type="example" e:example="" id="Successful widget deletion" data-summary-success="5" data-summary-ignore="0" data-summary-failure="0" data-summary-exception="0" data-summary-status="ExpectedToPass"><div data-bs-toggle="collapse" data-bs-target="#e91dea98c-174f-4f1d-bead-a5ca35047ad0" aria-expanded="true"><h4 style="visibility: hidden; height:0;" class="test-class"><i class="example-badge fa fa-check m-1 text-success"></i>Successful widget deletion</h4><i class="far fa-caret-square-down"></i><span> </span><a class="bd-example-title text-muted fw-lighter">Successful widget deletion</a></div><div class="bd-example collapse show rounded bg-light bg-gradient" id="e91dea98c-174f-4f1d-bead-a5ca35047ad0">

    <div cmdId="f702bc7b-df17-4115-a3f1-8ba05848166f" e:given="" class="given"><p class="lead text-primary">Given</p><hr />
        <div cmdId="c74106fe-c902-4b20-a170-0c14f6bb2ab6" e:db-set="" class="table table-sm table-hover">
            
        <div class="table-responsive mb-1 p-1"><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  Given widget:</caption><thead class="thead-default"><tr><th class="">name</th><th class="">quantity</th><th class="">id</th><th class="">updated</th></tr></thead><tbody><tr><td class=""><span>widget1</span></td><td class=""><span>10</span></td><td class=""><span>1</span></td><td class=""><span>2021-10-22 17:17:30.321</span></td></tr></tbody></table></div></div>
    </div>

    <div cmdId="ef8f3e4f-fefd-4066-8a07-cc0d38bab7fd" e:then="" class="then"><p class="lead text-success">Then</p><hr />
        <div cmdId="7c4e6f96-c340-474c-adb5-027fbf7e4518" e:delete=""><table class="ws-cases table table-sm caption-top"><div><div class="input-group mb-1 mt-1">
        <span class="input-group-text bg-danger text-white">DELETE</span>
        <span class="form-control bg-light text-primary font-weight-light" id="endpoint--606994337">/widgets/1</span>
    </div><div class="input-group input-group-sm">
        <span class="input-group-text">Content-Type</span>
        <span id="header-1618581615" class="form-control bg-light text-dark font-weight-light">application/json</span>
    </div></div><thead class="thead-default"><th colspan="2" style="text-align:center;" class="text-secondary">Use cases:</th></thead>
            <tr desc="Successful deletion" cmdId="055f3f25-1274-48d3-8755-feda1d94fc15" e:case="" data-type="case" id="6) Successful deletion"><tr><td colspan="2" class="text-muted bg-light" style="border-bottom: 1px solid lightgray;">6) Successful deletion</td></tr>
                
                <div cmdId="2344f644-2615-4e62-bd98-ef60ee98c401" e:check="" />
            <tr data-case-title="single"><td style="width: 100%;"><div class="httpstyle"><pre class="doc-code language-http"><code>DELETE /widgets/1 HTTP/1.1
</code></pre></div></td><td style="padding-left: 0;"><small><span class="exp-status rest-success">200</span><span class="badge badge-pill badge-light">23ms</span></small></td></tr><tr><td colspan="2" class="exp-body"><div>
        <nav>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation"> 
                <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1634912250371-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1634912250371" aria-controls="nav-et-1634912250371" aria-selected="true">Expected</button>
            </li>
            <li class="nav-item" role="presentation"> 
                <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1634912250371-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1634912250371" aria-controls="nav-at-1634912250371" aria-selected="false">Actual</button>
            </li>
          </ul>
        </nav>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="nav-et-1634912250371" role="tabpanel" aria-labelledby="nav-et-1634912250371-tab">
            <pre id="e-1634912250371" class="rest-success json"> </pre>
          </div>
          <div class="tab-pane fade" id="nav-at-1634912250371" role="tabpanel" aria-labelledby="nav-at-1634912250371-tab">
            <pre id="a-1634912250371" class="rest-success json"> </pre>
          </div>
        </div>
    </div></td></tr></tr><tr><td colspan="2">
                    <div cmdId="89d2892c-36e2-442f-9ff5-be3a577b777c" e:db-check="" class="table table-sm table-hover db-check"><div class="table-responsive mb-1 p-1"><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  Widget was deleted:</caption><thead class="thead-default"><tr><th /></tr></thead><tbody><tr><td colspan="4" class="table-success">EMPTY</td></tr></tbody></table></div></div>
                </td></tr>
            <tr desc="Absent widget deletion" cmdId="10f4d836-04dd-4fd9-8c1d-376c1421f199" e:case="" data-type="case" id="7) Absent widget deletion"><tr><td colspan="2" class="text-muted bg-light" style="border-bottom: 1px solid lightgray;">7) Absent widget deletion</td></tr>
                
            <tr data-case-title="single"><td style="width: 100%;"><div class="httpstyle"><pre class="doc-code language-http"><code>DELETE /widgets/1 HTTP/1.1
</code></pre></div></td><td style="padding-left: 0;"><small><span class="exp-status rest-success">HTTP/1.1 404 Not Found</span><span class="badge badge-pill badge-light">11ms</span></small></td></tr><tr><td colspan="2" class="exp-body"><div>
        <nav>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation"> 
                <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1634912250385-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1634912250385" aria-controls="nav-et-1634912250385" aria-selected="true">Expected</button>
            </li>
            <li class="nav-item" role="presentation"> 
                <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1634912250385-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1634912250385" aria-controls="nav-at-1634912250385" aria-selected="false">Actual</button>
            </li>
          </ul>
        </nav>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="nav-et-1634912250385" role="tabpanel" aria-labelledby="nav-et-1634912250385-tab">
            <pre id="e-1634912250385" class="rest-success json"> </pre>
          </div>
          <div class="tab-pane fade" id="nav-at-1634912250385" role="tabpanel" aria-labelledby="nav-at-1634912250385-tab">
            <pre id="a-1634912250385" class="rest-success json"> </pre>
          </div>
        </div>
    </div></td></tr></tr>
        </table></div>
    </div>

</div></div>

<h3>Retrieving API</h3>

<p>
    There is endpoint for retrieving all widgets.
</p>
<div class="mb-4 mt-4"><mark>The following markup:</mark><pre class="doc-code language-xml mt-2"><code>&lt;e:example name="Successful widget retrieving"&gt;
    &lt;e:given&gt;
        &lt;e:set var="upd1" value="{{now tz='GMT+1'}}" style="display:none"/&gt;
        &lt;e:set var="upd2" value="{{now plus='1 day'}}" style="display:none"/&gt;
        &lt;e:set var="format" value="yyyy-MM-dd'T'HH:mm:ss.SSS" style="display:none"/&gt;
        &lt;e:db-set caption="Given widgets:" table="widgets" cols="*name, *quantity, updated, id=1..10"&gt;
            &lt;e:row&gt;widget1, 10, {{upd1}}&lt;/e:row&gt;
            &lt;e:row&gt;widget2, 20, {{upd2}}&lt;/e:row&gt;
            &lt;e:row&gt;widget3, 30, {{date '01.02.2000 10:20+03:00' format="dd.MM.yyyy HH:mmz"}}&lt;/e:row&gt;
            &lt;e:row&gt;widget4, 40, {{date upd2 plus='12 h'}}&lt;/e:row&gt;
        &lt;/e:db-set&gt;
    &lt;/e:given&gt;
    &lt;e:then&gt;
        &lt;e:get url="/widgets"&gt;
            &lt;e:case desc="Can retrieve stored widgets"&gt;
                &lt;e:expected&gt; [{ "id": 1, "name": "widget1", "quantity": 10, "updatedAt": "{{dateFormat upd1 format}}" }, { "id": 2, "name": "widget2", "quantity": 20, "updatedAt": "{{dateFormat upd2 format}}" }, { "id": 3, "name": "widget3", "quantity": 30, "updatedAt": "{{dateFormat (date '01.02.2000 10:20+03:00' format="dd.MM.yyyy HH:mmz") format}}" }, { "id": 4, "name": "widget4", "quantity": 40, "updatedAt": "{{dateFormat (date upd2 plus='12 h') format}}" }] &lt;/e:expected&gt;
            &lt;/e:case&gt;
        &lt;/e:get&gt;
    &lt;/e:then&gt;
&lt;/e:example&gt;</code></pre><mark>will be rendered as:</mark></div><div xmlns:c="http://www.concordion.org/2007/concordion" name="Successful widget retrieving" print="true" cmdId="88b4ca4b-5cd6-491a-a84c-8ba8530d9b1e" c:example="Successful widget retrieving" c:status="ExpectedToPass" class="exam-example mb-3" data-type="example" e:example="" id="Successful widget retrieving" data-summary-success="2" data-summary-ignore="0" data-summary-failure="0" data-summary-exception="0" data-summary-status="ExpectedToPass"><div data-bs-toggle="collapse" data-bs-target="#e76d12c0c-457b-422d-8d09-db2f5c41c0ab" aria-expanded="true"><h4 style="visibility: hidden; height:0;" class="test-class"><i class="example-badge fa fa-check m-1 text-success"></i>Successful widget retrieving</h4><i class="far fa-caret-square-down"></i><span> </span><a class="bd-example-title text-muted fw-lighter">Successful widget retrieving</a></div><div class="bd-example collapse show rounded bg-light bg-gradient" id="e76d12c0c-457b-422d-8d09-db2f5c41c0ab">

    <div cmdId="854f465c-1507-48b3-9009-507ed1b39a7b" e:given="" class="given"><p class="lead text-primary">Given</p><hr />
        <pre var="upd1" style="display:none" e:set="" value="{{now tz='GMT+1'}}">Fri Oct 22 19:17:30 MSK 2021</pre>
        <pre var="upd2" style="display:none" e:set="" value="{{now plus='1 day'}}">Sat Oct 23 17:17:30 MSK 2021</pre>
        <pre var="format" style="display:none" e:set="" value="yyyy-MM-dd'T'HH:mm:ss.SSS">yyyy-MM-dd'T'HH:mm:ss.SSS</pre>
        <div cmdId="371f2f36-55d6-4e33-830c-bb2f001e07d7" e:db-set="" class="table table-sm table-hover">
            
            
            
            
        <div class="table-responsive mb-1 p-1"><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  Given widgets:</caption><thead class="thead-default"><tr><th class="table-info">name</th><th class="table-info">quantity</th><th class="">updated</th><th class="">id</th></tr></thead><tbody><tr><td class="table-info"><span>widget1</span></td><td class="table-info"><span>10</span></td><td class=""><span>2021-10-22 19:17:30.388</span></td><td class=""><span>1</span></td></tr><tr><td class="table-info"><span>widget2</span></td><td class="table-info"><span>20</span></td><td class=""><span>2021-10-23 17:17:30.389</span></td><td class=""><span>2</span></td></tr><tr><td class="table-info"><span>widget3</span></td><td class="table-info"><span>30</span></td><td class=""><span>2000-02-01 10:20:00.000</span></td><td class=""><span>3</span></td></tr><tr><td class="table-info"><span>widget4</span></td><td class="table-info"><span>40</span></td><td class=""><span>2021-10-24 05:17:30.389</span></td><td class=""><span>4</span></td></tr></tbody></table></div></div>
    </div>

    <div cmdId="188acc85-230f-4583-8860-930393cf4d24" e:then="" class="then"><p class="lead text-success">Then</p><hr />
        <div cmdId="95b6f777-d42b-4303-bf59-32b1577af7b3" e:get=""><table class="ws-cases table table-sm caption-top"><div><div class="input-group mb-1 mt-1">
        <span class="input-group-text bg-primary text-white">GET</span>
        <span class="form-control bg-light text-primary font-weight-light" id="endpoint-234817261">/widgets</span>
    </div><div class="input-group input-group-sm">
        <span class="input-group-text">Content-Type</span>
        <span id="header-1635504417" class="form-control bg-light text-dark font-weight-light">application/json</span>
    </div></div><thead class="thead-default"><th colspan="2" style="text-align:center;" class="text-secondary">Use cases:</th></thead>
            <tr desc="Can retrieve stored widgets" cmdId="4f57b67b-2ba6-41d9-9d9f-0c5f6f570d7d" e:case="" data-type="case" id="8) Can retrieve stored widgets"><tr><td colspan="2" class="text-muted bg-light" style="border-bottom: 1px solid lightgray;">8) Can retrieve stored widgets</td></tr>
                
            <tr data-case-title="single"><td style="width: 100%;"><div class="httpstyle"><pre class="doc-code language-http"><code>GET /widgets HTTP/1.1
</code></pre></div></td><td style="padding-left: 0;"><small><span class="exp-status rest-success">200</span><span class="badge badge-pill badge-light">22ms</span></small></td></tr><tr><td colspan="2" class="exp-body"><div>
        <nav>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation"> 
                <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1634912250441-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1634912250441" aria-controls="nav-et-1634912250441" aria-selected="true">Expected</button>
            </li>
            <li class="nav-item" role="presentation"> 
                <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1634912250441-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1634912250441" aria-controls="nav-at-1634912250441" aria-selected="false">Actual</button>
            </li>
          </ul>
        </nav>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="nav-et-1634912250441" role="tabpanel" aria-labelledby="nav-et-1634912250441-tab">
            <pre id="e-1634912250441" class="rest-success json">[{
  "id": 1,
  "name": "widget1",
  "quantity": 10,
  "updatedAt": "2021-10-22T19:17:30.388"
}, {
  "id": 2,
  "name": "widget2",
  "quantity": 20,
  "updatedAt": "2021-10-23T17:17:30.389"
}, {
  "id": 3,
  "name": "widget3",
  "quantity": 30,
  "updatedAt": "2000-02-01T10:20:00.000"
}, {
  "id": 4,
  "name": "widget4",
  "quantity": 40,
  "updatedAt": "2021-10-24T05:17:30.389"
}]</pre>
          </div>
          <div class="tab-pane fade" id="nav-at-1634912250441" role="tabpanel" aria-labelledby="nav-at-1634912250441-tab">
            <pre id="a-1634912250441" class="rest-success json">[{
  "id": 1,
  "name": "widget1",
  "quantity": 10,
  "updatedAt": "2021-10-22T19:17:30.388"
}, {
  "id": 2,
  "name": "widget2",
  "quantity": 20,
  "updatedAt": "2021-10-23T17:17:30.389"
}, {
  "id": 3,
  "name": "widget3",
  "quantity": 30,
  "updatedAt": "2000-02-01T10:20:00.000"
}, {
  "id": 4,
  "name": "widget4",
  "quantity": 40,
  "updatedAt": "2021-10-24T05:17:30.389"
}]</pre>
          </div>
        </div>
    </div></td></tr></tr>
        </table></div>
    </div>

</div></div>

<h3>CRUD-style testing</h3>

<p>
    If gray-box testing (with direct Database checking) is not viable, here is the example of black-box approach:
</p>
<div class="mb-4 mt-4"><mark>The following markup:</mark><pre class="doc-code language-xml mt-2"><code>&lt;e:example name="black-box CRUD"&gt;
    &lt;e:given&gt;
        &lt;e:db-set caption="Given no widgets:" table="widgets"/&gt;
    &lt;/e:given&gt;
    &lt;e:when&gt; Posting a new widget: 
        &lt;e:post url="/widgets"&gt;
            &lt;e:case desc="Create"&gt;
                &lt;e:body&gt;{"name" : "widget1", "quantity": "10"}&lt;/e:body&gt;
                &lt;e:expected statusCode="201" reasonPhrase="Created"&gt; { "id": "{{number}}", "name": "widget1", "quantity": 10, "updatedAt": "{{string}}" } &lt;/e:expected&gt;
            &lt;/e:case&gt;
        &lt;/e:post&gt;
    &lt;/e:when&gt;
    &lt;e:then&gt;
        &lt;e:set var="id" value="{{responseBody 'id'}}" style="display:none"/&gt;
        &lt;e:set var="updatedAt" value="{{responseBody 'updatedAt'}}" style="display:none"/&gt;
        &lt;p&gt; The widget has been created with 
            &lt;var&gt;id&lt;/var&gt; = 
            &lt;code cc:echo="#id"/&gt; and 
            &lt;var&gt;updatedAt&lt;/var&gt; = 
            &lt;code cc:echo="#updatedAt"/&gt; and is available in widget list: 
        &lt;/p&gt;
        &lt;e:get url="/widgets"&gt;
            &lt;e:case desc="Read"&gt;
                &lt;e:expected&gt; [{ "id": {{id}}, "name": "widget1", "quantity": 10, "updatedAt": "{{updatedAt}}" }] &lt;/e:expected&gt;
            &lt;/e:case&gt;
        &lt;/e:get&gt;
    &lt;/e:then&gt;
    &lt;e:when&gt; Updating the widget 
        &lt;var&gt;name&lt;/var&gt; and 
        &lt;var&gt;quantity&lt;/var&gt;: 
        &lt;e:put url="/widgets"&gt;
            &lt;e:case desc="Update"&gt;
                &lt;e:body&gt;{"id": {{id}}, "name": "new name", "quantity": "0"}&lt;/e:body&gt;
                &lt;e:expected&gt; { "id": {{id}}, "name": "new name", "quantity": 0, "updatedAt": "{{formattedAndWithinNow "yyyy-MM-dd'T'HH:mm:ss.SSS" "5s"}}" } &lt;/e:expected&gt;
            &lt;/e:case&gt;
        &lt;/e:put&gt;
    &lt;/e:when&gt;
    &lt;e:then&gt;
        &lt;p&gt; The widget data has been changed: &lt;/p&gt;
        &lt;e:get url="/widgets"&gt;
            &lt;e:case desc="Read"&gt;
                &lt;e:expected&gt; [{ "id": {{id}}, "name": "new name", "quantity": 0, "updatedAt": "{{formattedAndWithinNow "yyyy-MM-dd'T'HH:mm:ss.SSS" "5s"}}" }] &lt;/e:expected&gt;
            &lt;/e:case&gt;
        &lt;/e:get&gt;
    &lt;/e:then&gt;
    &lt;e:when&gt; Deleting the widget: 
        &lt;e:delete url="/widgets/{{id}}"&gt;
            &lt;e:case desc="Delete"&gt;
                &lt;e:expected/&gt;
            &lt;/e:case&gt;
        &lt;/e:delete&gt;
    &lt;/e:when&gt;
    &lt;e:then&gt;
        &lt;p&gt; The widget disappeared from the list: &lt;/p&gt;
        &lt;e:get url="/widgets"&gt;
            &lt;e:case desc="Read"&gt;
                &lt;e:expected&gt; [] &lt;/e:expected&gt;
            &lt;/e:case&gt;
        &lt;/e:get&gt;
    &lt;/e:then&gt;
&lt;/e:example&gt;</code></pre><mark>will be rendered as:</mark></div><div xmlns:c="http://www.concordion.org/2007/concordion" name="black-box CRUD" print="true" cmdId="936e1c1c-72f8-4213-bdb2-9c32eab1245e" c:example="black-box CRUD" c:status="ExpectedToPass" class="exam-example mb-3" data-type="example" e:example="" id="black-box CRUD" data-summary-success="12" data-summary-ignore="0" data-summary-failure="0" data-summary-exception="0" data-summary-status="ExpectedToPass"><div data-bs-toggle="collapse" data-bs-target="#e7dc2baa7-ee66-4179-a28e-c8ca5c855692" aria-expanded="true"><h4 style="visibility: hidden; height:0;" class="test-class"><i class="example-badge fa fa-check m-1 text-success"></i>black-box CRUD</h4><i class="far fa-caret-square-down"></i><span> </span><a class="bd-example-title text-muted fw-lighter">black-box CRUD</a></div><div class="bd-example collapse show rounded bg-light bg-gradient" id="e7dc2baa7-ee66-4179-a28e-c8ca5c855692">

    <div cmdId="abdbb344-b09a-4c51-b3d9-a753bbb4293b" e:given="" class="given"><p class="lead text-primary">Given</p><hr />
        <div cmdId="0606683f-f28b-47f3-9481-9477ae452be8" e:db-set="" class="table table-sm table-hover"><div class="table-responsive mb-1 p-1"><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  Given no widgets:</caption><thead class="thead-default"><tr><th /></tr></thead><tbody><tr><td colspan="0">EMPTY</td></tr></tbody></table></div></div>
    </div>

    <div cmdId="85c7f424-9039-46d3-95fd-9521887e3230" e:when="" class="when"><p class="lead text-warning">When</p><hr />
        Posting a new widget:
        <div cmdId="0b540eca-4577-4973-bdf4-2a4dcf5887c3" e:post=""><table class="ws-cases table table-sm caption-top"><div><div class="input-group mb-1 mt-1">
        <span class="input-group-text bg-success text-white">POST</span>
        <span class="form-control bg-light text-primary font-weight-light" id="endpoint--719590305">/widgets</span>
    </div><div class="input-group input-group-sm">
        <span class="input-group-text">Content-Type</span>
        <span id="header--1684166729" class="form-control bg-light text-dark font-weight-light">application/json</span>
    </div></div><thead class="thead-default"><th colspan="2" style="text-align:center;" class="text-secondary">Use cases:</th></thead>
            <tr desc="Create" cmdId="725f5e97-050f-4339-b707-4a926ca81b70" e:case="" data-type="case" id="9) Create"><tr><td colspan="2" class="text-muted bg-light" style="border-bottom: 1px solid lightgray;">9) Create</td></tr>
                
                
            <tr data-case-title="single"><td style="width: 50%;"><div class="httpstyle"><pre class="doc-code language-http"><code>POST /widgets HTTP/1.1
</code></pre></div></td><td style="padding-left: 0;"><small><span class="exp-status rest-success">HTTP/1.1 201 Created</span><span class="badge badge-pill badge-light">15ms</span></small></td></tr><tr><td class="json exp-body" style="min-width: 20%; width: 50%;">{
  "name": "widget1",
  "quantity": "10"
}</td><td colspan="1" class="exp-body"><div>
        <nav>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation"> 
                <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1634912250474-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1634912250474" aria-controls="nav-et-1634912250474" aria-selected="true">Expected</button>
            </li>
            <li class="nav-item" role="presentation"> 
                <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1634912250474-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1634912250474" aria-controls="nav-at-1634912250474" aria-selected="false">Actual</button>
            </li>
          </ul>
        </nav>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="nav-et-1634912250474" role="tabpanel" aria-labelledby="nav-et-1634912250474-tab">
            <pre id="e-1634912250474" class="rest-success json">{
  "id": "${json-unit.any-number}",
  "name": "widget1",
  "quantity": 10,
  "updatedAt": "${json-unit.any-string}"
}</pre>
          </div>
          <div class="tab-pane fade" id="nav-at-1634912250474" role="tabpanel" aria-labelledby="nav-at-1634912250474-tab">
            <pre id="a-1634912250474" class="rest-success json">{
  "id": 5,
  "name": "widget1",
  "quantity": 10,
  "updatedAt": "2021-10-22T17:17:30.465"
}</pre>
          </div>
        </div>
    </div></td></tr></tr>
        </table></div>
    </div>

    <div cmdId="663c479d-735d-47bf-8da2-454b4de38f58" e:then="" class="then"><p class="lead text-success">Then</p><hr />
        <pre var="id" style="display:none" e:set="" value="{{responseBody 'id'}}">5</pre>
        <pre var="updatedAt" style="display:none" e:set="" value="{{responseBody 'updatedAt'}}">2021-10-22T17:17:30.465</pre>
        <p>
            The widget has been created with <var>id</var> = <code cc:echo="#id">5</code> and <var>updatedAt</var> = <code cc:echo="#updatedAt">2021-10-22T17:17:30.465</code>
            and is available in widget list:
        </p>
        <div cmdId="01fe667f-152f-4c47-8fa5-ccd5dc7bc50c" e:get=""><table class="ws-cases table table-sm caption-top"><div><div class="input-group mb-1 mt-1">
        <span class="input-group-text bg-primary text-white">GET</span>
        <span class="form-control bg-light text-primary font-weight-light" id="endpoint-231768637">/widgets</span>
    </div><div class="input-group input-group-sm">
        <span class="input-group-text">Content-Type</span>
        <span id="header-544894151" class="form-control bg-light text-dark font-weight-light">application/json</span>
    </div></div><thead class="thead-default"><th colspan="2" style="text-align:center;" class="text-secondary">Use cases:</th></thead>
            <tr desc="Read" cmdId="462b1926-a056-4ca2-9441-dd659b4c65fb" e:case="" data-type="case" id="10) Read"><tr><td colspan="2" class="text-muted bg-light" style="border-bottom: 1px solid lightgray;">10) Read</td></tr>
                
            <tr data-case-title="single"><td style="width: 100%;"><div class="httpstyle"><pre class="doc-code language-http"><code>GET /widgets HTTP/1.1
</code></pre></div></td><td style="padding-left: 0;"><small><span class="exp-status rest-success">200</span><span class="badge badge-pill badge-light">12ms</span></small></td></tr><tr><td colspan="2" class="exp-body"><div>
        <nav>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation"> 
                <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1634912251261-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1634912251261" aria-controls="nav-et-1634912251261" aria-selected="true">Expected</button>
            </li>
            <li class="nav-item" role="presentation"> 
                <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1634912251261-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1634912251261" aria-controls="nav-at-1634912251261" aria-selected="false">Actual</button>
            </li>
          </ul>
        </nav>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="nav-et-1634912251261" role="tabpanel" aria-labelledby="nav-et-1634912251261-tab">
            <pre id="e-1634912251261" class="rest-success json">[{
  "id": 5,
  "name": "widget1",
  "quantity": 10,
  "updatedAt": "2021-10-22T17:17:30.465"
}]</pre>
          </div>
          <div class="tab-pane fade" id="nav-at-1634912251261" role="tabpanel" aria-labelledby="nav-at-1634912251261-tab">
            <pre id="a-1634912251261" class="rest-success json">[{
  "id": 5,
  "name": "widget1",
  "quantity": 10,
  "updatedAt": "2021-10-22T17:17:30.465"
}]</pre>
          </div>
        </div>
    </div></td></tr></tr>
        </table></div>
    </div>

    <div cmdId="4727f8b4-66ae-41da-9c3c-15c967a0a367" e:when="" class="when"><p class="lead text-warning">When</p><hr />
        Updating the widget <var>name</var> and <var>quantity</var>:
        <div cmdId="f809b02d-2f19-4ddc-bdf3-f8fe88a325fb" e:put=""><table class="ws-cases table table-sm caption-top"><div><div class="input-group mb-1 mt-1">
        <span class="input-group-text bg-warning text-white">PUT</span>
        <span class="form-control bg-light text-primary font-weight-light" id="endpoint--1965197847">/widgets</span>
    </div><div class="input-group input-group-sm">
        <span class="input-group-text">Content-Type</span>
        <span id="header-508879693" class="form-control bg-light text-dark font-weight-light">application/json</span>
    </div></div><thead class="thead-default"><th colspan="2" style="text-align:center;" class="text-secondary">Use cases:</th></thead>
            <tr desc="Update" cmdId="699de9b0-a6d8-44ba-84af-f626e63918d1" e:case="" data-type="case" id="11) Update"><tr><td colspan="2" class="text-muted bg-light" style="border-bottom: 1px solid lightgray;">11) Update</td></tr>
                
                
            <tr data-case-title="single"><td style="width: 50%;"><div class="httpstyle"><pre class="doc-code language-http"><code>PUT /widgets HTTP/1.1
</code></pre></div></td><td style="padding-left: 0;"><small><span class="exp-status rest-success">200</span><span class="badge badge-pill badge-light">16ms</span></small></td></tr><tr><td class="json exp-body" style="min-width: 20%; width: 50%;">{
  "id": 5,
  "name": "new name",
  "quantity": "0"
}</td><td colspan="1" class="exp-body"><div>
        <nav>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation"> 
                <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1634912251289-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1634912251289" aria-controls="nav-et-1634912251289" aria-selected="true">Expected</button>
            </li>
            <li class="nav-item" role="presentation"> 
                <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1634912251289-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1634912251289" aria-controls="nav-at-1634912251289" aria-selected="false">Actual</button>
            </li>
          </ul>
        </nav>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="nav-et-1634912251289" role="tabpanel" aria-labelledby="nav-et-1634912251289-tab">
            <pre id="e-1634912251289" class="rest-success json">{
  "id": 5,
  "name": "new name",
  "quantity": 0,
  "updatedAt": "${json-unit.matches:formattedAndWithinNow}[yyyy-MM-dd'T'HH:mm:ss.SSS][5s]"
}</pre>
          </div>
          <div class="tab-pane fade" id="nav-at-1634912251289" role="tabpanel" aria-labelledby="nav-at-1634912251289-tab">
            <pre id="a-1634912251289" class="rest-success json">{
  "id": 5,
  "name": "new name",
  "quantity": 0,
  "updatedAt": "2021-10-22T17:17:31.282"
}</pre>
          </div>
        </div>
    </div></td></tr></tr>
        </table></div>
    </div>

    <div cmdId="7a2acc14-9b67-412a-bd67-053d4ee32b28" e:then="" class="then"><p class="lead text-success">Then</p><hr />
        <p>
            The widget data has been changed:
        </p>
        <div cmdId="499d5068-cb40-45df-849a-3d14a4e233af" e:get=""><table class="ws-cases table table-sm caption-top"><div><div class="input-group mb-1 mt-1">
        <span class="input-group-text bg-primary text-white">GET</span>
        <span class="form-control bg-light text-primary font-weight-light" id="endpoint--451463553">/widgets</span>
    </div><div class="input-group input-group-sm">
        <span class="input-group-text">Content-Type</span>
        <span id="header-630011675" class="form-control bg-light text-dark font-weight-light">application/json</span>
    </div></div><thead class="thead-default"><th colspan="2" style="text-align:center;" class="text-secondary">Use cases:</th></thead>
            <tr desc="Read" cmdId="7d96822b-2282-4bcc-acc8-e18484b6a3db" e:case="" data-type="case" id="12) Read"><tr><td colspan="2" class="text-muted bg-light" style="border-bottom: 1px solid lightgray;">12) Read</td></tr>
                
            <tr data-case-title="single"><td style="width: 100%;"><div class="httpstyle"><pre class="doc-code language-http"><code>GET /widgets HTTP/1.1
</code></pre></div></td><td style="padding-left: 0;"><small><span class="exp-status rest-success">200</span><span class="badge badge-pill badge-light">11ms</span></small></td></tr><tr><td colspan="2" class="exp-body"><div>
        <nav>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation"> 
                <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1634912251307-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1634912251307" aria-controls="nav-et-1634912251307" aria-selected="true">Expected</button>
            </li>
            <li class="nav-item" role="presentation"> 
                <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1634912251307-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1634912251307" aria-controls="nav-at-1634912251307" aria-selected="false">Actual</button>
            </li>
          </ul>
        </nav>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="nav-et-1634912251307" role="tabpanel" aria-labelledby="nav-et-1634912251307-tab">
            <pre id="e-1634912251307" class="rest-success json">[{
  "id": 5,
  "name": "new name",
  "quantity": 0,
  "updatedAt": "${json-unit.matches:formattedAndWithinNow}[yyyy-MM-dd'T'HH:mm:ss.SSS][5s]"
}]</pre>
          </div>
          <div class="tab-pane fade" id="nav-at-1634912251307" role="tabpanel" aria-labelledby="nav-at-1634912251307-tab">
            <pre id="a-1634912251307" class="rest-success json">[{
  "id": 5,
  "name": "new name",
  "quantity": 0,
  "updatedAt": "2021-10-22T17:17:31.282"
}]</pre>
          </div>
        </div>
    </div></td></tr></tr>
        </table></div>
    </div>

    <div cmdId="f2a2e32a-0734-47d2-8f0a-0db583a77bde" e:when="" class="when"><p class="lead text-warning">When</p><hr />
        Deleting the widget:
        <div cmdId="29ccec1f-d2ec-461b-bf76-5ab5af6ce824" e:delete=""><table class="ws-cases table table-sm caption-top"><div><div class="input-group mb-1 mt-1">
        <span class="input-group-text bg-danger text-white">DELETE</span>
        <span class="form-control bg-light text-primary font-weight-light" id="endpoint-634452374">/widgets/5</span>
    </div><div class="input-group input-group-sm">
        <span class="input-group-text">Content-Type</span>
        <span id="header--905765939" class="form-control bg-light text-dark font-weight-light">application/json</span>
    </div></div><thead class="thead-default"><th colspan="2" style="text-align:center;" class="text-secondary">Use cases:</th></thead>
            <tr desc="Delete" cmdId="3cba5ef8-d247-46aa-a521-34dff0e81700" e:case="" data-type="case" id="13) Delete"><tr><td colspan="2" class="text-muted bg-light" style="border-bottom: 1px solid lightgray;">13) Delete</td></tr>
                
            <tr data-case-title="single"><td style="width: 100%;"><div class="httpstyle"><pre class="doc-code language-http"><code>DELETE /widgets/5 HTTP/1.1
</code></pre></div></td><td style="padding-left: 0;"><small><span class="exp-status rest-success">200</span><span class="badge badge-pill badge-light">13ms</span></small></td></tr><tr><td colspan="2" class="exp-body"><div>
        <nav>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation"> 
                <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1634912251325-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1634912251325" aria-controls="nav-et-1634912251325" aria-selected="true">Expected</button>
            </li>
            <li class="nav-item" role="presentation"> 
                <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1634912251325-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1634912251325" aria-controls="nav-at-1634912251325" aria-selected="false">Actual</button>
            </li>
          </ul>
        </nav>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="nav-et-1634912251325" role="tabpanel" aria-labelledby="nav-et-1634912251325-tab">
            <pre id="e-1634912251325" class="rest-success json"> </pre>
          </div>
          <div class="tab-pane fade" id="nav-at-1634912251325" role="tabpanel" aria-labelledby="nav-at-1634912251325-tab">
            <pre id="a-1634912251325" class="rest-success json"> </pre>
          </div>
        </div>
    </div></td></tr></tr>
        </table></div>
    </div>

    <div cmdId="58e84730-4abb-4909-be89-bfc9ebae1807" e:then="" class="then"><p class="lead text-success">Then</p><hr />
        <p>
            The widget disappeared from the list:
        </p>
        <div cmdId="501785bf-0b64-49cc-b4ac-4a59de993405" e:get=""><table class="ws-cases table table-sm caption-top"><div><div class="input-group mb-1 mt-1">
        <span class="input-group-text bg-primary text-white">GET</span>
        <span class="form-control bg-light text-primary font-weight-light" id="endpoint-925508915">/widgets</span>
    </div><div class="input-group input-group-sm">
        <span class="input-group-text">Content-Type</span>
        <span id="header--866704340" class="form-control bg-light text-dark font-weight-light">application/json</span>
    </div></div><thead class="thead-default"><th colspan="2" style="text-align:center;" class="text-secondary">Use cases:</th></thead>
            <tr desc="Read" cmdId="a5378d90-1c1f-410a-bffe-db935b58053b" e:case="" data-type="case" id="14) Read"><tr><td colspan="2" class="text-muted bg-light" style="border-bottom: 1px solid lightgray;">14) Read</td></tr>
                
            <tr data-case-title="single"><td style="width: 100%;"><div class="httpstyle"><pre class="doc-code language-http"><code>GET /widgets HTTP/1.1
</code></pre></div></td><td style="padding-left: 0;"><small><span class="exp-status rest-success">200</span><span class="badge badge-pill badge-light">15ms</span></small></td></tr><tr><td colspan="2" class="exp-body"><div>
        <nav>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation"> 
                <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1634912251345-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1634912251345" aria-controls="nav-et-1634912251345" aria-selected="true">Expected</button>
            </li>
            <li class="nav-item" role="presentation"> 
                <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1634912251345-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1634912251345" aria-controls="nav-at-1634912251345" aria-selected="false">Actual</button>
            </li>
          </ul>
        </nav>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="nav-et-1634912251345" role="tabpanel" aria-labelledby="nav-et-1634912251345-tab">
            <pre id="e-1634912251345" class="rest-success json">[]</pre>
          </div>
          <div class="tab-pane fade" id="nav-at-1634912251345" role="tabpanel" aria-labelledby="nav-at-1634912251345-tab">
            <pre id="a-1634912251345" class="rest-success json">[]</pre>
          </div>
        </div>
    </div></td></tr></tr>
        </table></div>
    </div>

</div></div>

<h2>Testing async behavior</h2>

<p>
    Assume we need to trigger a job and do checks only after it's finished:
</p>

<h3>Await with custom method</h3>

<p>
    Trigger the job and check that it's finished by polling custom method <code>isDone</code>:
</p>
<div class="mb-4 mt-4"><mark>The following markup:</mark><pre class="doc-code language-xml mt-2"><code>&lt;e:example name="custom polling"&gt;
    &lt;e:given&gt;
        &lt;e:post url="/jobs"&gt;
            &lt;e:case desc="Trigger job with some optional body"&gt;
                &lt;e:body&gt;{"name" : "value"}&lt;/e:body&gt;
                &lt;e:expected&gt;{"id" : "{{number}}" }&lt;/e:expected&gt;
            &lt;/e:case&gt;
        &lt;/e:post&gt;
    &lt;/e:given&gt;
    &lt;e:when&gt;
        &lt;e:set var="id" value="{{responseBody 'id'}}" style="display:none"/&gt;
        &lt;e:await untilTrue="isDone(#id)" atMostSec="3" pollDelayMillis="500" pollIntervalMillis="1000"/&gt; Job 
        &lt;code cc:echo="#id"/&gt; is finished. 
    &lt;/e:when&gt;
    &lt;e:then&gt; Now we can check result: 
        &lt;e:db-check table="jobResult" cols="result" where="id={{id}}"&gt;
            &lt;e:row&gt;done&lt;/e:row&gt;
        &lt;/e:db-check&gt;
    &lt;/e:then&gt;
&lt;/e:example&gt;</code></pre><mark>will be rendered as:</mark></div><div xmlns:c="http://www.concordion.org/2007/concordion" name="custom polling" print="true" cmdId="9fcc3dae-f54a-4f65-9394-79983f908672" c:example="custom polling" c:status="ExpectedToPass" class="exam-example mb-3" data-type="example" e:example="" id="custom polling" data-summary-success="3" data-summary-ignore="0" data-summary-failure="0" data-summary-exception="0" data-summary-status="ExpectedToPass"><div data-bs-toggle="collapse" data-bs-target="#e8207b770-d724-44a2-bcf5-ad769f533a90" aria-expanded="true"><h4 style="visibility: hidden; height:0;" class="test-class"><i class="example-badge fa fa-check m-1 text-success"></i>custom polling</h4><i class="far fa-caret-square-down"></i><span> </span><a class="bd-example-title text-muted fw-lighter">custom polling</a></div><div class="bd-example collapse show rounded bg-light bg-gradient" id="e8207b770-d724-44a2-bcf5-ad769f533a90">

    <div cmdId="2bb0b306-04fe-4f1a-b239-19ae8861c4b4" e:given="" class="given"><p class="lead text-primary">Given</p><hr />
        <div cmdId="4e91a442-ba19-4b7d-a4dc-b9edbee4a5b5" e:post=""><table class="ws-cases table table-sm caption-top"><div><div class="input-group mb-1 mt-1">
        <span class="input-group-text bg-success text-white">POST</span>
        <span class="form-control bg-light text-primary font-weight-light" id="endpoint--1065566116">/jobs</span>
    </div><div class="input-group input-group-sm">
        <span class="input-group-text">Content-Type</span>
        <span id="header--23983627" class="form-control bg-light text-dark font-weight-light">application/json</span>
    </div></div><thead class="thead-default"><th colspan="2" style="text-align:center;" class="text-secondary">Use cases:</th></thead>
            <tr desc="Trigger job with some optional body" cmdId="e594ce5d-5947-4d07-bab5-1452298883bc" e:case="" data-type="case" id="15) Trigger job with some optional body"><tr><td colspan="2" class="text-muted bg-light" style="border-bottom: 1px solid lightgray;">15) Trigger job with some optional body</td></tr>
                
                
            <tr data-case-title="single"><td style="width: 50%;"><div class="httpstyle"><pre class="doc-code language-http"><code>POST /jobs HTTP/1.1
</code></pre></div></td><td style="padding-left: 0;"><small><span class="exp-status rest-success">200</span><span class="badge badge-pill badge-light">15ms</span></small></td></tr><tr><td class="json exp-body" style="min-width: 20%; width: 50%;">{
  "name": "value"
}</td><td colspan="1" class="exp-body"><div>
        <nav>
          <ul class="nav nav-tabs" role="tablist">
            <li class="nav-item" role="presentation"> 
                <button class="nav-link active small text-success" type="button" role="tab" id="nav-et-1634912251372-tab" data-bs-toggle="tab" data-bs-target="#nav-et-1634912251372" aria-controls="nav-et-1634912251372" aria-selected="true">Expected</button>
            </li>
            <li class="nav-item" role="presentation"> 
                <button class="nav-link small" type="button" role="tab" onclick="setTimeout(() =&gt; { window.dispatchEvent(new Event('resize')); }, 200)" id="nav-at-1634912251372-tab" data-bs-toggle="tab" data-bs-target="#nav-at-1634912251372" aria-controls="nav-at-1634912251372" aria-selected="false">Actual</button>
            </li>
          </ul>
        </nav>
        <div class="tab-content">
          <div class="tab-pane fade show active" id="nav-et-1634912251372" role="tabpanel" aria-labelledby="nav-et-1634912251372-tab">
            <pre id="e-1634912251372" class="rest-success json">{
  "id": "${json-unit.any-number}"
}</pre>
          </div>
          <div class="tab-pane fade" id="nav-at-1634912251372" role="tabpanel" aria-labelledby="nav-at-1634912251372-tab">
            <pre id="a-1634912251372" class="rest-success json">{
  "id": 1
}</pre>
          </div>
        </div>
    </div></td></tr></tr>
        </table></div>
    </div>

    <div cmdId="5a75289e-187b-4fb2-a53b-4e00b067c401" e:when="" class="when"><p class="lead text-warning">When</p><hr />
        <pre var="id" style="display:none" e:set="" value="{{responseBody 'id'}}">1</pre>
        <span atMostSec="3" pollDelayMillis="500" pollIntervalMillis="1000" cmdId="265fd3fb-4f6c-49e8-9179-464ba20049d5" e:await="" />
        Job <code cc:echo="#id">1</code> is finished.
    </div>

    <div cmdId="eb4d3f48-39ef-4b7a-a38f-3d8295ef7f82" e:then="" class="then"><p class="lead text-success">Then</p><hr />
        Now we can check result:
        <div cmdId="2c337636-4066-4f3f-b7b4-e78e8ba904b7" e:db-check="" class="table table-sm table-hover db-check">
            
        <div class="table-responsive mb-1 p-1"><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  jobResult</caption><thead class="thead-default"><tr><th class="">RESULT</th></tr></thead><tbody><tr><td class=" table-success"> <span>done</span></td></tr></tbody></table></div></div>
    </div>

</div></div>

<h3>Await with API polling</h3>

<p>
    Same but with http polling of some job-execution API:
</p>
<div class="mb-4 mt-4"><mark>The following markup:</mark><pre class="doc-code language-xml mt-2"><code>&lt;e:example name="http polling"&gt;
    &lt;e:when&gt; Trigger job on 
        &lt;code cc:set="#url"&gt;/jobs&lt;/code&gt; with some optional body 
        &lt;code cc:set="#json"&gt;{"name" : "value"}&lt;/code&gt;
        &lt;e:await untilHttpPost="{{url}}" hasStatusCode="200"&gt;{{json}}&lt;/e:await&gt;
        &lt;e:set var="id" value="{{responseBody 'id'}}" style="display:none"/&gt; and wait until it's finished. 
        &lt;e:await untilHttpGet="/jobs/{{id}}" hasBodyFrom="/data/getting-started/job-finished.json"/&gt; Job id = 
        &lt;code cc:echo="#id"/&gt;
    &lt;/e:when&gt;
    &lt;e:then&gt; Now we can check result: 
        &lt;e:db-check table="jobResult" cols="result" where="id={{id}}"&gt;
            &lt;e:row&gt;done&lt;/e:row&gt;
        &lt;/e:db-check&gt;
    &lt;/e:then&gt;
&lt;/e:example&gt;</code></pre><mark>will be rendered as:</mark></div><div xmlns:c="http://www.concordion.org/2007/concordion" name="http polling" print="true" cmdId="6b1ad8e6-2ca1-427a-96ea-b074f9767ffc" c:example="http polling" c:status="ExpectedToPass" class="exam-example mb-3" data-type="example" e:example="" id="http polling" data-summary-success="1" data-summary-ignore="0" data-summary-failure="0" data-summary-exception="0" data-summary-status="ExpectedToPass"><div data-bs-toggle="collapse" data-bs-target="#e92bb783d-710e-49d2-85d3-34b4d953f709" aria-expanded="true"><h4 style="visibility: hidden; height:0;" class="test-class"><i class="example-badge fa fa-check m-1 text-success"></i>http polling</h4><i class="far fa-caret-square-down"></i><span> </span><a class="bd-example-title text-muted fw-lighter">http polling</a></div><div class="bd-example collapse show rounded bg-light bg-gradient" id="e92bb783d-710e-49d2-85d3-34b4d953f709">

    <div cmdId="00748205-8ffc-4fca-9a3b-bdd114034196" e:when="" class="when"><p class="lead text-warning">When</p><hr />
        Trigger job on <code cc:set="#url">/jobs</code> with some optional body <code cc:set="#json">{"name" : "value"}</code>
        <span cmdId="14eebd67-d93f-454a-80fb-a09db935d561" e:await="" />
        <pre var="id" style="display:none" e:set="" value="{{responseBody 'id'}}">2</pre>
        and wait until it's finished.
        <span cmdId="b042e110-0945-4b15-9489-472ae1303340" e:await="" />
        Job id = <code cc:echo="#id">2</code>
    </div>

    <div cmdId="a8d7e266-8059-4874-aa96-f8c917db5a61" e:then="" class="then"><p class="lead text-success">Then</p><hr />
        Now we can check result:
        <div cmdId="b7591e9d-000d-4532-bef4-fb0c279ec148" e:db-check="" class="table table-sm table-hover db-check">
            
        <div class="table-responsive mb-1 p-1"><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  jobResult</caption><thead class="thead-default"><tr><th class="">RESULT</th></tr></thead><tbody><tr><td class=" table-success"> <span>done</span></td></tr></tbody></table></div></div>
    </div>

</div></div>

<h3>Await on check</h3>

<p>
    Same but with awaiting by <code>db-check</code> command:
</p>
<div class="mb-4 mt-4"><mark>The following markup:</mark><pre class="doc-code language-xml mt-2"><code>&lt;e:example name="db-check polling"&gt;
    &lt;e:when&gt; Trigger job on 
        &lt;code cc:set="#url"&gt;/jobs&lt;/code&gt; with some optional body 
        &lt;code cc:set="#json"&gt;{"name" : "value"}&lt;/code&gt;
        &lt;e:await untilHttpPost="{{url}}" hasStatusCode="200"&gt;{{json}}&lt;/e:await&gt;
        &lt;e:set var="id" value="{{responseBody 'id'}}" style="display:none"/&gt; Job id = 
        &lt;code cc:echo="#id"/&gt;
    &lt;/e:when&gt;
    &lt;e:then&gt; Await for result: 
        &lt;e:db-check table="jobResult" cols="id, result" where="id={{id}}" awaitAtMostSec="4"&gt;
            &lt;e:row&gt;{{id}}, done&lt;/e:row&gt;
        &lt;/e:db-check&gt;
    &lt;/e:then&gt;
&lt;/e:example&gt;</code></pre><mark>will be rendered as:</mark></div><div xmlns:c="http://www.concordion.org/2007/concordion" name="db-check polling" print="true" cmdId="01364fb4-bf27-4be9-9aca-7e74eccfeff5" c:example="db-check polling" c:status="ExpectedToPass" class="exam-example mb-3" data-type="example" e:example="" id="db-check polling" data-summary-success="2" data-summary-ignore="0" data-summary-failure="0" data-summary-exception="0" data-summary-status="ExpectedToPass"><div data-bs-toggle="collapse" data-bs-target="#e4947f9bb-c7ed-433e-aaa4-9c27008638d6" aria-expanded="true"><h4 style="visibility: hidden; height:0;" class="test-class"><i class="example-badge fa fa-check m-1 text-success"></i>db-check polling</h4><i class="far fa-caret-square-down"></i><span> </span><a class="bd-example-title text-muted fw-lighter">db-check polling</a></div><div class="bd-example collapse show rounded bg-light bg-gradient" id="e4947f9bb-c7ed-433e-aaa4-9c27008638d6">

    <div cmdId="c2d5d744-e86f-4eec-b82e-d40b3fb5c08f" e:when="" class="when"><p class="lead text-warning">When</p><hr />
        Trigger job on <code cc:set="#url">/jobs</code> with some optional body <code cc:set="#json">{"name" : "value"}</code>
        <span cmdId="54e6f56d-1d26-43fa-b7f9-13ab9f25a5f3" e:await="" />
        <pre var="id" style="display:none" e:set="" value="{{responseBody 'id'}}">3</pre>
        Job id = <code cc:echo="#id">3</code>
    </div>

    <div cmdId="4d6d0bd6-169e-453d-82af-fbcd1ec661b2" e:then="" class="then"><p class="lead text-success">Then</p><hr />
        Await for result:
        <div cmdId="6bafec89-1464-401f-adda-c55d97988832" e:db-check="" class="table table-sm table-hover db-check">
            
        <div class="table-responsive mb-1 p-1"><table class="table table-sm caption-top"><caption style="width:max-content"><i class="fa fa-database me-1"> </i>  jobResult</caption><thead class="thead-default"><tr><th class="">ID</th><th class="">RESULT</th></tr></thead><tbody><tr><td class=" table-success"> <span>3</span></td><td class=" table-success"> <span>done</span></td></tr></tbody></table></div></div>
    </div>

</div></div>

</div></main></div></div><div class="footer">Results generated by <a href="http://www.concordion.org" style="font-weight: bold; text-decoration: none; color: #89C;">Concordion</a><div class="testTime">in 7869 ms on 22-Oct-2021 at 17:17:37 MSK</div></div></body>
<button id="btnToTop" onclick="topFunction()" type="button" class="btn btn-light btn-sm text-muted me-1"><i class="fa fa-arrow-up"></i></button></html>