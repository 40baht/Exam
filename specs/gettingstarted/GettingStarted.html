<?xml version="1.0" encoding="UTF-8"?><html xmlns:e="http://exam.extension.io" xmlns:cc="http://www.concordion.org/2007/concordion"><head><style>* {
  font-family: Arial;
}
body {
  padding: 32px;  
}
pre {
  padding: 6px 28px 6px 28px;
  background-color: #E8EEF7;
}
pre, pre *, code, code *, kbd {
  font-family: Courier New, Courier;
  font-size: 10pt;
}
h1, h1 * {
  font-size: 24pt;	
}
p, td, th, li, .breadcrumbs {
  font-size: 10pt;
}
p, li {
  line-height: 140%;
  max-width: 720px;
}
table {
  border-collapse: collapse;
  empty-cells: show;
  margin: 8px 0px 8px 0px;
}
th, td {
  border: 1px solid black;
  padding: 3px;
}
td {
  background-color: white;
  vertical-align: top;
}
th {
  background-color: #C3D9FF;
}
li {
  margin-top: 6px;
  margin-bottom: 6px; 
}

.example, :not(th)[cc\:example] {
  padding: 6px 16px 6px 16px;
  border: 1px solid #C3D9FF;
  margin: 6px 0px 28px 0px;
  background-color: #F5F9FD;
}
.example h3, [cc\:example] h3 {
  margin-top: 8px;
  margin-bottom: 8px;
  font-size: 12pt;
}

p.success {
  padding: 2px;
}
.success, .success * {
  background-color: #afa !important;
}
.success pre {
  background-color: #bbffbb;
}
.failure, .failure * {
  background-color: #ffb0b0;
  padding: 1px;
}
.failure .expected {
  text-decoration: line-through;
  color: #bb5050;
}
.ignored, .ignored * {
  background-color: #f0f0f0 !important;	
}

ins {
  text-decoration: none;	
}

.exceptionMessage {
  background-color: #fdd;
  font-family: Courier New, Courier, Monospace;
  font-size: 10pt;
  display: block;
  font-weight: normal;
  padding: 4px;
  text-decoration: none !important;
}
.stackTrace, .stackTrace * {
  font-weight: normal;
}
.stackTrace {
  display: none;
  padding: 1px 4px 4px 4px;
  background-color: #fdd;
  border-top: 1px dotted black;
}
.stackTraceExceptionMessage {
  display: block;
  font-family: Courier New, Courier, Monospace;
  font-size: 8pt;
  white-space: wrap;
  padding: 1px 0px 1px 0px;
}
.stackTraceEntry {
  white-space: nowrap;
  font-family: Courier New, Courier, Monospace;
  display: block;
  font-size: 8pt;
  padding: 1px 0px 1px 32px;
}
.stackTraceButton {
  font-size: 8pt;
  margin: 2px 8px 2px 0px;
  font-weight: normal;
  font-family: Arial;
}

.special {
  font-style: italic;
}
.missing, .missing * {
  background-color: #ff9999;
  color:#bb5050;
  text-decoration: line-through;
}
.surplus, .surplus * {
  background-color: #ff9999;
}
.footer {
  text-align: right;
  margin-top: 40px;
  font-size: 8pt;
  width: 100%;
  color: #999;
}
.footer .testTime {
  padding: 2px 10px 0px 0px;
}

.idea {
  font-size: 9pt;
  color: #888;
  font-style: italic;	
}
.tight li {
  margin-top: 1px;
  margin-bottom: 1px; 
}
.commentary {
  float: right;
  width: 200px;
  background-color: #ffffd0;
  padding:8px;
  border: 3px solid #eeeeb0;	 
  margin: 10px 0px 10px 10px;	 
}
.commentary, .commentary * {
  font-size: 8pt;
}
</style><meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<link type="text/css" rel="stylesheet" href="../../timingExtensionStyle.css" /><script type="text/javascript" src="../../timingExtensionToggle.js"></script><link type="text/css" rel="stylesheet" href="../../codemirror/codemirror.css" /><link type="text/css" rel="stylesheet" href="../../codemirror/merge.css" /><link type="text/css" rel="stylesheet" href="../../codemirror/enable-codemirror.css" /><link type="text/css" rel="stylesheet" href="../../codemirror/foldgutter.css" /><link type="text/css" rel="stylesheet" href="../../codemirror/simplescrollbar.css" /><script type="text/javascript" src="../../codemirror/codemirror.js"></script><script type="text/javascript" src="../../codemirror/enable-codemirror.js"></script><script type="text/javascript" src="../../codemirror/javascript.js"></script><script type="text/javascript" src="../../codemirror/xml.js"></script><script type="text/javascript" src="../../codemirror/htmlmixed.js"></script><script type="text/javascript" src="../../codemirror/formatting.js"></script><script type="text/javascript" src="../../codemirror/markdown.js"></script><script type="text/javascript" src="../../codemirror/diff_match_patch.js"></script><script type="text/javascript" src="../../codemirror/merge.js"></script><script type="text/javascript" src="../../codemirror/xml-fold.js"></script><script type="text/javascript" src="../../codemirror/simplescrollbar.js"></script><script type="text/javascript" src="../../bootstrap/jquery-3.2.1.slim.min.js"></script><script type="text/javascript" src="../../bootstrap/popper.min.js"></script><script type="text/javascript" src="../../bootstrap/bootstrap.min.js"></script><script type="text/javascript" src="../../bootstrap/sidebar.js"></script><link type="text/css" rel="stylesheet" href="../../bootstrap/enable-bootstrap.css" /><link type="text/css" rel="stylesheet" href="../../bootstrap/bootstrap.min.css" /><link type="text/css" rel="stylesheet" href="../../bootstrap/callout.css" /><link type="text/css" rel="stylesheet" href="../../bootstrap/font-awesome.min.css" /><link type="text/css" rel="stylesheet" href="../../bootstrap/scrollToTop.css" /><script type="text/javascript" src="../../bootstrap/scrollToTop.js"></script></head><body><div id="toggle-button"><img id="toggle-on" src="../../timing-on.svg" height="24" width="24" style="display:none" /><img id="toggle-off" src="../../timing-off.svg" height="24" width="24" /></div><span class="breadcrumbs"><a href="../Specs.html">Exam - Concordion extension</a> &gt;</span>
<h1>Getting started</h1>
<div cmdId="1aa15552-ab94-4151-a2ad-9aa2316ba4c4" e:summary="" class="pin"><h4>Summary<button type="button" class="btn btn-light btn-sm text-muted ml-1" data-toggle="collapse" data-target="#summary" aria-expanded="true" aria-controls="summary">collapse</button></h4><div id="summary" class="collapse show"><div class="list-group"><a class="list-group-item list-group-item-action" href="#Successful widget creation">Successful widget creation<small class="card-img-overlay m-1" style="padding:0; left:inherit;"><span class="badge badge-pill badge-light">2s 171ms</span><span class="badge badge-pill badge-success">14</span><span class="badge badge-pill badge-secondary"></span><span class="badge badge-pill badge-warning"></span><span class="badge badge-pill badge-danger"></span></small><button type="button" class="btn btn-light btn-sm text-muted ml-1" data-toggle="collapse" data-target="#840b74b2-49ce-48ad-9104-60f804ae781e" aria-expanded="true" aria-controls="840b74b2-49ce-48ad-9104-60f804ae781e">cases</button></a><div id="840b74b2-49ce-48ad-9104-60f804ae781e" class="collapse"><a href="#1) Successful creation" class="list-group-item list-group-item-action text-muted">1) Successful creation<i></i></a></div><a class="list-group-item list-group-item-action" href="#Validate creation">Validate creation<small class="card-img-overlay m-1" style="padding:0; left:inherit;"><span class="badge badge-pill badge-light">272ms</span><span class="badge badge-pill badge-success">9</span><span class="badge badge-pill badge-secondary"></span><span class="badge badge-pill badge-warning"></span><span class="badge badge-pill badge-danger"></span></small><button type="button" class="btn btn-light btn-sm text-muted ml-1" data-toggle="collapse" data-target="#5c9ee545-1888-4ab8-a3cf-ce3a957289dd" aria-expanded="true" aria-controls="5c9ee545-1888-4ab8-a3cf-ce3a957289dd">cases</button></a><div id="5c9ee545-1888-4ab8-a3cf-ce3a957289dd" class="collapse"><a href="#2) quantity is required" class="list-group-item list-group-item-action text-muted">2) quantity is required<i></i></a><a href="#3) name is required" class="list-group-item list-group-item-action text-muted">3) name is required<i></i></a><a href="#4) name should't be blank or more than 10 symbols" class="list-group-item list-group-item-action text-muted">4) name should't be blank or more than 10 symbols<i></i></a></div><a class="list-group-item list-group-item-action" href="#Validate creation - parametrized">Validate creation - parametrized<small class="card-img-overlay m-1" style="padding:0; left:inherit;"><span class="badge badge-pill badge-light">172ms</span><span class="badge badge-pill badge-success">9</span><span class="badge badge-pill badge-secondary"></span><span class="badge badge-pill badge-warning"></span><span class="badge badge-pill badge-danger"></span></small><button type="button" class="btn btn-light btn-sm text-muted ml-1" data-toggle="collapse" data-target="#3ff1f184-7cb1-4047-baeb-24756ac38101" aria-expanded="true" aria-controls="3ff1f184-7cb1-4047-baeb-24756ac38101">cases</button></a><div id="3ff1f184-7cb1-4047-baeb-24756ac38101" class="collapse"><a href="#5) Name and quantity validation" class="list-group-item list-group-item-action text-muted">5) Name and quantity validation<i></i></a></div><a class="list-group-item list-group-item-action" href="#Successful widget deletion">Successful widget deletion<small class="card-img-overlay m-1" style="padding:0; left:inherit;"><span class="badge badge-pill badge-light">242ms</span><span class="badge badge-pill badge-success">5</span><span class="badge badge-pill badge-secondary"></span><span class="badge badge-pill badge-warning"></span><span class="badge badge-pill badge-danger"></span></small><button type="button" class="btn btn-light btn-sm text-muted ml-1" data-toggle="collapse" data-target="#58db897e-0e21-4beb-8de6-a2c2644d765e" aria-expanded="true" aria-controls="58db897e-0e21-4beb-8de6-a2c2644d765e">cases</button></a><div id="58db897e-0e21-4beb-8de6-a2c2644d765e" class="collapse"><a href="#6) Successful deletion" class="list-group-item list-group-item-action text-muted">6) Successful deletion<i></i></a><a href="#7) Absent widget deletion" class="list-group-item list-group-item-action text-muted">7) Absent widget deletion<i></i></a></div><a class="list-group-item list-group-item-action" href="#Successful widget retrieving">Successful widget retrieving<small class="card-img-overlay m-1" style="padding:0; left:inherit;"><span class="badge badge-pill badge-light">154ms</span><span class="badge badge-pill badge-success">2</span><span class="badge badge-pill badge-secondary"></span><span class="badge badge-pill badge-warning"></span><span class="badge badge-pill badge-danger"></span></small><button type="button" class="btn btn-light btn-sm text-muted ml-1" data-toggle="collapse" data-target="#54c7655b-4a35-4e11-be3f-532906431108" aria-expanded="true" aria-controls="54c7655b-4a35-4e11-be3f-532906431108">cases</button></a><div id="54c7655b-4a35-4e11-be3f-532906431108" class="collapse"><a href="#8) Can retrieve stored widgets" class="list-group-item list-group-item-action text-muted">8) Can retrieve stored widgets<i></i></a></div><a class="list-group-item list-group-item-action" href="#CRUD">CRUD<small class="card-img-overlay m-1" style="padding:0; left:inherit;"><span class="badge badge-pill badge-light">699ms</span><span class="badge badge-pill badge-success">8</span><span class="badge badge-pill badge-secondary"></span><span class="badge badge-pill badge-warning"></span><span class="badge badge-pill badge-danger"></span></small><button type="button" class="btn btn-light btn-sm text-muted ml-1" data-toggle="collapse" data-target="#4b9df51b-3716-4bcf-bdb4-a4d47c8e2d0b" aria-expanded="true" aria-controls="4b9df51b-3716-4bcf-bdb4-a4d47c8e2d0b">cases</button></a><div id="4b9df51b-3716-4bcf-bdb4-a4d47c8e2d0b" class="collapse"><a href="#9) Create" class="list-group-item list-group-item-action text-muted">9) Create<i></i></a><a href="#10) Read" class="list-group-item list-group-item-action text-muted">10) Read<i></i></a><a href="#11) Update" class="list-group-item list-group-item-action text-muted">11) Update<i></i></a><a href="#12) Delete" class="list-group-item list-group-item-action text-muted">12) Delete<i></i></a></div><a class="list-group-item list-group-item-action" href="#Trigger job and poll result with custom method">Trigger job and poll result with custom method<small class="card-img-overlay m-1" style="padding:0; left:inherit;"><span class="badge badge-pill badge-light">2s 759ms</span><span class="badge badge-pill badge-success">3</span><span class="badge badge-pill badge-secondary"></span><span class="badge badge-pill badge-warning"></span><span class="badge badge-pill badge-danger"></span></small><button type="button" class="btn btn-light btn-sm text-muted ml-1" data-toggle="collapse" data-target="#f28b88fa-2b3f-4572-bfb0-a0aca7039d3c" aria-expanded="true" aria-controls="f28b88fa-2b3f-4572-bfb0-a0aca7039d3c">cases</button></a><div id="f28b88fa-2b3f-4572-bfb0-a0aca7039d3c" class="collapse"><a href="#13) Trigger job with some optional body" class="list-group-item list-group-item-action text-muted">13) Trigger job with some optional body<i></i></a></div><a class="list-group-item list-group-item-action" href="#Trigger job and poll result with http request">Trigger job and poll result with http request<small class="card-img-overlay m-1" style="padding:0; left:inherit;"><span class="badge badge-pill badge-light">2s 236ms</span><span class="badge badge-pill badge-success">1</span><span class="badge badge-pill badge-secondary"></span><span class="badge badge-pill badge-warning"></span><span class="badge badge-pill badge-danger"></span></small></a><a class="list-group-item list-group-item-action" href="#Trigger job and poll result with db-check">Trigger job and poll result with db-check<small class="card-img-overlay m-1" style="padding:0; left:inherit;"><span class="badge badge-pill badge-light">2s 140ms</span><span class="badge badge-pill badge-success">1</span><span class="badge badge-pill badge-secondary"></span><span class="badge badge-pill badge-warning"></span><span class="badge badge-pill badge-danger"></span></small></a></div></div></div>
<div cmdId="499bc8b8-f833-4acd-aae6-14fe7fd085df" e:given="" class="bd-callout bd-callout-info">
    We have a simple CRUD App for widgets manipulation.
    Widgets are stored in DB like this:
    <table cmdId="3b66227c-8abc-4981-abbf-736d51c6e813" e:db-show="" class="table table-sm"><caption><i class="fa fa-database fa-pull-left fa-border"> WIDGETS</i></caption><thead class="thead-default"><tr><th class="">ID</th><th class="">NAME</th><th class="">QUANTITY</th><th class="">UPDATED</th></tr></thead><tbody><tr><td class=""><span>1</span></td><td class=""><span>widget one</span></td><td class=""><span>27</span></td><td class=""><span>2020-05-16 11:02:45.045</span></td></tr><tr><td class=""><span>2</span></td><td class=""><span>widget two</span></td><td class=""><span>14</span></td><td class=""><span>2020-05-16 11:02:45.045</span></td></tr></tbody></table>
</div>
<h3>Let's test widget creation API:</h3>
<div xmlns:c="http://www.concordion.org/2007/concordion" name="Successful widget creation" print="true" cmdId="53ba06b9-4be6-463a-9d45-07f6ef26fbc1" c:example="Successful widget creation" class="card mb-3" e:example="" id="Successful widget creation"><div class="card-header" data-toggle="collapse" data-target="#102879189" aria-expanded="true" aria-controls="102879189"><a name="Successful widget creation" data-type="example">Successful widget creation</a></div><div class="card-body collapse show" id="102879189"><pre class="htmlmixed card">
&lt;e:given&gt;
        &lt;e:db-set caption="There are no widgets" table="widgets" /&gt;
    &lt;/e:given&gt;
&lt;e:post url="/widgets"&gt;
        &lt;e:case desc="Successful creation"&gt;
            &lt;e:body&gt;{"name" : "widget1", "quantity": "10"}&lt;/e:body&gt;
            &lt;e:expected statusCode="201" reasonPhrase="Created"&gt;
                {
                "id": "{{number}}",
                "name": "widget1",
                "quantity": 10,
                "updatedAt": "{{formattedAndWithinNow "yyyy-MM-dd'T'HH:mm:ss.SSSZZ" "5s"}}"
                }
            &lt;/e:expected&gt;
            &lt;e:check&gt;
                &lt;e:db-check caption="Widget was created:" table="widgets" cols="id, name, quantity, updated" orderBy="name"&gt;
                    &lt;e:row&gt;!{number}, widget1, 10, !{within 5s}&lt;/e:row&gt;
                &lt;/e:db-check&gt;
                or
                &lt;e:db-check caption="Widget was created:" table="widgets" cols="id, name, quantity, updated" orderBy="name"&gt;
                    &lt;e:row&gt;!{regex}\d, widget1, 10, !{notNull}&lt;/e:row&gt;
                &lt;/e:db-check&gt;
                or with variable setting:
                &lt;e:db-check caption="Widget was created:" table="widgets" cols="id, name, quantity, updated" orderBy="name"&gt;
                    &lt;e:row&gt;!{number}&amp;gt;&amp;gt;id, !{notNull}&amp;gt;&amp;gt;name, !{regex}\d+&amp;gt;&amp;gt;quantity, !{within 5s}&amp;gt;&amp;gt;updated&lt;/e:row&gt;
                &lt;/e:db-check&gt;
                #id = &lt;code cc:echo="#id" /&gt; #name = &lt;code cc:echo="#name" /&gt; #quantity = &lt;code cc:echo="#quantity" /&gt; #updated = &lt;code cc:echo="#updated" /&gt;
            &lt;/e:check&gt;
        &lt;/e:case&gt;
    &lt;/e:post&gt;</pre>
    <div cmdId="fda65ee5-3e56-4abc-9fdf-daf75ca77138" e:given="" class="bd-callout bd-callout-info">
        <table cmdId="bc3db0fc-3b14-47c3-b9a2-eee9769fb723" e:db-set="" class="table table-sm"><div></div><span></span><caption><i class="fa fa-database fa-pull-left fa-border"> There are no widgets</i></caption><thead class="thead-default"><tr /></thead><tbody /></table>
    </div>
    <div cmdId="b84b15f9-ae66-498e-8f3a-907766d5a6f6" e:post="" class="bd-callout bd-callout-success"><table class="table table-sm"><thead class="thead-default"><thead class="thead-default"><th>Request</th><th>Expected response</th><th>Status code</th></thead></thead>
        <tr desc="Successful creation" cmdId="d775b9b2-86c7-4d58-8153-94d60ede40c5" e:case="" data-type="case" id="1) Successful creation"><tr><td colspan="3" class="text-muted">1) Successful creation</td></tr>
            
            
            <div cmdId="5232eb5d-d389-4c8d-b3d7-4545f84b7076" e:check="" />
        <tr><tr><td colspan="3"><div><i>POST </i><code>/widgets</code><span></span></div></td></tr><td class="json">{
  "name": "widget1",
  "quantity": "10"
}</td><td class="json rest-success">{
  "id": "${json-unit.any-number}",
  "name": "widget1",
  "quantity": 10,
  "updatedAt": "${json-unit.matches:formattedAndWithinNow}[yyyy-MM-dd'T'HH:mm:ss.SSSZZ][5s]"
}</td><td class="rest-success">HTTP/1.1 201 Created</td></tr></tr><tr><td colspan="3">
                <table caption="Widget was created:" cmdId="8c48b2df-0fac-4163-803d-6b8aded5460d" e:db-check="" class="table table-sm">
                    
                <div></div><span></span><caption><i class="fa fa-database fa-pull-left fa-border"> Widget was created:</i></caption><thead class="thead-default"><tr><th>id</th><th>name</th><th>quantity</th><th>updated</th></tr></thead><tr><td class="table-success"> <span>!{number} (3)</span></td><td class="table-success"> <span>widget1</span></td><td class="table-success"> <span>10</span></td><td class="table-success"> <span>!{within 5s} (2020-05-16 11:02:47.442)</span></td></tr></table>
                or
                <table caption="Widget was created:" cmdId="2043ed1a-7aaa-491f-8ffb-722ae94110e4" e:db-check="" class="table table-sm">
                    
                <div></div><span></span><caption><i class="fa fa-database fa-pull-left fa-border"> Widget was created:</i></caption><thead class="thead-default"><tr><th>id</th><th>name</th><th>quantity</th><th>updated</th></tr></thead><tr><td class="table-success"> <span>!{regex}\d (3)</span></td><td class="table-success"> <span>widget1</span></td><td class="table-success"> <span>10</span></td><td class="table-success"> <span>!{notNull} (2020-05-16 11:02:47.442)</span></td></tr></table>
                or with variable setting:
                <table caption="Widget was created:" cmdId="baa626f4-e956-4b41-81cf-1e920b4c4983" e:db-check="" class="table table-sm">
                    
                <div></div><span></span><caption><i class="fa fa-database fa-pull-left fa-border"> Widget was created:</i></caption><thead class="thead-default"><tr><th>id</th><th>name</th><th>quantity</th><th>updated</th></tr></thead><tr><td class="table-success"> <span>!{number}&gt;&gt;id (3)</span></td><td class="table-success"> <span>!{notNull}&gt;&gt;name (widget1)</span></td><td class="table-success"> <span>!{regex}\d+&gt;&gt;quantity (10)</span></td><td class="table-success"> <span>!{within 5s}&gt;&gt;updated (2020-05-16 11:02:47.442)</span></td></tr></table>
                #id = <code cc:echo="#id">3</code> #name = <code cc:echo="#name">widget1</code> #quantity = <code cc:echo="#quantity">10</code> #updated = <code cc:echo="#updated">2020-05-16 11:02:47.442</code>
            </td></tr>
    <div><h4><span class="badge badge-success ml-1 mr-1">POST</span><span class="badge badge-info ml-1 mr-1">application/json</span><code>/widgets</code></h4></div></table></div>
</div><div class="card-footer text-muted" data-toggle="collapse" data-target="#102879189" aria-expanded="true" aria-controls="102879189"><small><span class="badge badge-pill badge-success">14</span><span class="badge badge-pill badge-secondary"></span><span class="badge badge-pill badge-warning"></span><span class="badge badge-pill badge-danger"></span></small></div></div>
<br />
<blockquote class="blockquote">
    <p class="mb-0">For testing validation, parametrized (aka <code>where</code>) cases may be used:</p>
</blockquote>
<div xmlns:c="http://www.concordion.org/2007/concordion" name="Validate creation" print="true" cmdId="a0daeb69-bc18-402f-9b82-2e290ac9fb41" c:example="Validate creation" class="card mb-3" e:example="" id="Validate creation"><div class="card-header" data-toggle="collapse" data-target="#17190537" aria-expanded="true" aria-controls="17190537"><a name="Validate creation" data-type="example">Validate creation</a></div><div class="card-body collapse show" id="17190537"><pre class="htmlmixed card">
&lt;e:given&gt;
        &lt;e:db-set caption="There are no widgets" table="widgets" /&gt;
    &lt;/e:given&gt;
&lt;e:post url="/widgets"&gt;
        &lt;e:case desc="quantity is required"&gt;
            &lt;e:body&gt;
                {"name": "widget1"}
            &lt;/e:body&gt;
            &lt;e:expected statusCode="400" reasonPhrase="Bad Request"&gt;
                { "error": "quantity is required" }
            &lt;/e:expected&gt;
        &lt;/e:case&gt;
        &lt;e:case desc="name is required"&gt;
            &lt;e:body&gt;
                {"quantity": "10"}
            &lt;/e:body&gt;
            &lt;e:expected statusCode="400" reasonPhrase="Bad Request"&gt;
                { "error": "name is required" }
            &lt;/e:expected&gt;
        &lt;/e:case&gt;
        &lt;e:case desc="name should't be blank or more than 10 symbols"&gt;
            &lt;e:body&gt;
                {"name": "{{invalid}}", "quantity": "10"}
            &lt;/e:body&gt;
            &lt;e:expected statusCode="400" reasonPhrase="Bad Request"&gt;
                { "error": "{{error}}" }
            &lt;/e:expected&gt;
            &lt;e:where vars="invalid, error"&gt;
                &lt;e:vals&gt;''          , blank value not allowed&lt;/e:vals&gt;
                &lt;e:vals&gt;more_than_10, Value 'more_than_10' can't be stored to database column because exceeds length app.Widgets.name.columnType.colLength&lt;/e:vals&gt;
            &lt;/e:where&gt;
        &lt;/e:case&gt;
        &lt;e:check&gt;
            &lt;e:db-check caption="No widgets were created:" table="widgets" /&gt;
        &lt;/e:check&gt;
    &lt;/e:post&gt;</pre>
    <div cmdId="016554ff-8624-436f-af86-045a30872890" e:given="" class="bd-callout bd-callout-info">
        <table cmdId="93dae03f-ac0f-469e-8070-510213a63bcb" e:db-set="" class="table table-sm"><div></div><span></span><caption><i class="fa fa-database fa-pull-left fa-border"> There are no widgets</i></caption><thead class="thead-default"><tr /></thead><tbody /></table>
    </div>
    <div cmdId="5fda333b-40fa-4723-b93f-0e935cdd3473" e:post="" class="bd-callout bd-callout-success"><table class="table table-sm"><thead class="thead-default"><thead class="thead-default"><th>Request</th><th>Expected response</th><th>Status code</th></thead></thead>
        <tr desc="quantity is required" cmdId="5d4f2eef-fae6-42f9-a3be-b67574d5ecce" e:case="" data-type="case" id="2) quantity is required"><tr><td colspan="3" class="text-muted">2) quantity is required</td></tr>
            
            
        <tr><tr><td colspan="3"><div><i>POST </i><code>/widgets</code><span></span></div></td></tr><td class="json">{
  "name": "widget1"
}</td><td class="json rest-success">{
  "error": "quantity is required"
}</td><td class="rest-success">HTTP/1.1 400 Bad Request</td></tr></tr>
        <tr desc="name is required" cmdId="37989c08-33a6-43e9-b22b-f07bd984d3bc" e:case="" data-type="case" id="3) name is required"><tr><td colspan="3" class="text-muted">3) name is required</td></tr>
            
            
        <tr><tr><td colspan="3"><div><i>POST </i><code>/widgets</code><span></span></div></td></tr><td class="json">{
  "quantity": "10"
}</td><td class="json rest-success">{
  "error": "name is required"
}</td><td class="rest-success">HTTP/1.1 400 Bad Request</td></tr></tr>
        <tr desc="name should't be blank or more than 10 symbols" cmdId="653e299c-ca54-4452-8af2-ec50450a910e" e:case="" data-type="case" id="4) name should't be blank or more than 10 symbols"><tr><td colspan="3" class="text-muted">4) name should't be blank or more than 10 symbols</td></tr>
            
            
            <e:where>
                
                
            </e:where>
        <tr><tr><td colspan="3"><div><i>POST </i><code>/widgets</code><span></span></div></td></tr><td class="json">{
  "name": "",
  "quantity": "10"
}</td><td class="json rest-success">{
  "error": "blank value not allowed"
}</td><td class="rest-success">HTTP/1.1 400 Bad Request</td></tr><tr><tr><td colspan="3"><div><i>POST </i><code>/widgets</code><span></span></div></td></tr><td class="json">{
  "name": "more_than_10",
  "quantity": "10"
}</td><td class="json rest-success">{
  "error": "Value 'more_than_10' can't be stored to database column because exceeds length app.Widgets.name.columnType.colLength"
}</td><td class="rest-success">HTTP/1.1 400 Bad Request</td></tr></tr>
        <div cmdId="78c8828b-725c-4554-8ded-cd6186ea3c13" e:check="" />
    <div><h4><span class="badge badge-success ml-1 mr-1">POST</span><span class="badge badge-info ml-1 mr-1">application/json</span><code>/widgets</code></h4></div></table><tr><td colspan="3">
            <table caption="No widgets were created:" cmdId="822cb1a5-621d-4f1b-a70a-2809ce1b4493" e:db-check="" class="table table-sm"><div></div><span></span><caption><i class="fa fa-database fa-pull-left fa-border"> No widgets were created:</i></caption><thead class="thead-default"><tr /></thead><tr><td colspan="0" class="table-success">&lt;EMPTY&gt;</td></tr></table>
        </td></tr></div>
</div><div class="card-footer text-muted" data-toggle="collapse" data-target="#17190537" aria-expanded="true" aria-controls="17190537"><small><span class="badge badge-pill badge-success">9</span><span class="badge badge-pill badge-secondary"></span><span class="badge badge-pill badge-warning"></span><span class="badge badge-pill badge-danger"></span></small></div></div>
<br />
<blockquote class="blockquote">
    <p class="mb-0">Or more tricky and compact equivalent of previous example (request/response body templates are hidden in files):</p>
</blockquote>
<div xmlns:c="http://www.concordion.org/2007/concordion" name="Validate creation - parametrized" print="true" cmdId="e760c847-dbc0-4d14-965e-49ac540e6adb" c:example="Validate creation - parametrized" class="card mb-3" e:example="" id="Validate creation - parametrized"><div class="card-header" data-toggle="collapse" data-target="#-1613731824" aria-expanded="true" aria-controls="-1613731824"><a name="Validate creation - parametrized" data-type="example">Validate creation - parametrized</a></div><div class="card-body collapse show" id="-1613731824"><pre class="htmlmixed card">
&lt;e:given&gt;
        &lt;e:db-set caption="There are no widgets" table="widgets" /&gt;
    &lt;/e:given&gt;
&lt;e:post url="/widgets"&gt;
        &lt;e:case desc="Name and quantity validation"&gt;
            &lt;e:body from="/data/getting-started/{{req}}" /&gt;
            &lt;e:expected from="/data/getting-started/error.json" statusCode="400" reasonPhrase="Bad Request" /&gt;
            &lt;e:where vars="name, req, error"&gt;
                &lt;e:vals&gt;ignored     , invalid-no-name.json    , name is required&lt;/e:vals&gt;
                &lt;e:vals&gt;ignored     , invalid-no-quantity.json, quantity is required&lt;/e:vals&gt;
                &lt;e:vals&gt;''          , create-req.json         , blank value not allowed&lt;/e:vals&gt;
                &lt;e:vals&gt;more_than_10, create-req.json         , Value 'more_than_10' can't be stored to database column because exceeds length app.Widgets.name.columnType.colLength&lt;/e:vals&gt;
            &lt;/e:where&gt;
        &lt;/e:case&gt;
        &lt;e:check&gt;
            &lt;e:db-check caption="No widgets were created:" table="widgets" /&gt;
        &lt;/e:check&gt;
    &lt;/e:post&gt;</pre>
    <div cmdId="79d08c42-2030-4260-96b2-22cf9d8b78a6" e:given="" class="bd-callout bd-callout-info">
        <table cmdId="9a193aaa-39f5-4bf5-b2f3-3de0508faa1d" e:db-set="" class="table table-sm"><div></div><span></span><caption><i class="fa fa-database fa-pull-left fa-border"> There are no widgets</i></caption><thead class="thead-default"><tr /></thead><tbody /></table>
    </div>
    <div cmdId="c7af5dd9-ff46-47e4-95c1-ef8826d627f2" e:post="" class="bd-callout bd-callout-success"><table class="table table-sm"><thead class="thead-default"><thead class="thead-default"><th>Request</th><th>Expected response</th><th>Status code</th></thead></thead>
        <tr desc="Name and quantity validation" cmdId="6b99a595-dd01-43fa-9757-25f3c3a5dc49" e:case="" data-type="case" id="5) Name and quantity validation"><tr><td colspan="3" class="text-muted">5) Name and quantity validation</td></tr>
            
            
            <e:where>
                
                
                
                
            </e:where>
        <tr><tr><td colspan="3"><div><i>POST </i><code>/widgets</code><span></span></div></td></tr><td from="/data/getting-started/{{req}}" class="json">{
  "quantity": "10"
}</td><td from="/data/getting-started/error.json" class="json rest-success">{
  "error": "name is required"
}</td><td class="rest-success">HTTP/1.1 400 Bad Request</td></tr><tr><tr><td colspan="3"><div><i>POST </i><code>/widgets</code><span></span></div></td></tr><td from="/data/getting-started/{{req}}" class="json">{
  "name": "widget1"
}</td><td from="/data/getting-started/error.json" class="json rest-success">{
  "error": "quantity is required"
}</td><td class="rest-success">HTTP/1.1 400 Bad Request</td></tr><tr><tr><td colspan="3"><div><i>POST </i><code>/widgets</code><span></span></div></td></tr><td from="/data/getting-started/{{req}}" class="json">{
  "name": "",
  "quantity": "10"
}</td><td from="/data/getting-started/error.json" class="json rest-success">{
  "error": "blank value not allowed"
}</td><td class="rest-success">HTTP/1.1 400 Bad Request</td></tr><tr><tr><td colspan="3"><div><i>POST </i><code>/widgets</code><span></span></div></td></tr><td from="/data/getting-started/{{req}}" class="json">{
  "name": "more_than_10",
  "quantity": "10"
}</td><td from="/data/getting-started/error.json" class="json rest-success">{
  "error": "Value 'more_than_10' can't be stored to database column because exceeds length app.Widgets.name.columnType.colLength"
}</td><td class="rest-success">HTTP/1.1 400 Bad Request</td></tr></tr>
        <div cmdId="c60fccb3-fa18-41e4-a2b4-821c90324071" e:check="" />
    <div><h4><span class="badge badge-success ml-1 mr-1">POST</span><span class="badge badge-info ml-1 mr-1">application/json</span><code>/widgets</code></h4></div></table><tr><td colspan="3">
            <table caption="No widgets were created:" cmdId="3a2a726a-7aae-47f5-8bd0-94304d78a34d" e:db-check="" class="table table-sm"><div></div><span></span><caption><i class="fa fa-database fa-pull-left fa-border"> No widgets were created:</i></caption><thead class="thead-default"><tr /></thead><tr><td colspan="0" class="table-success">&lt;EMPTY&gt;</td></tr></table>
        </td></tr></div>
</div><div class="card-footer text-muted" data-toggle="collapse" data-target="#-1613731824" aria-expanded="true" aria-controls="-1613731824"><small><span class="badge badge-pill badge-success">9</span><span class="badge badge-pill badge-secondary"></span><span class="badge badge-pill badge-warning"></span><span class="badge badge-pill badge-danger"></span></small></div></div>
<br />
<h3>Let's test widget deletion API:</h3>
<div xmlns:c="http://www.concordion.org/2007/concordion" name="Successful widget deletion" print="true" cmdId="2c512d39-f3b7-4091-be77-718bb80f1d3e" c:example="Successful widget deletion" class="card mb-3" e:example="" id="Successful widget deletion"><div class="card-header" data-toggle="collapse" data-target="#-897825596" aria-expanded="true" aria-controls="-897825596"><a name="Successful widget deletion" data-type="example">Successful widget deletion</a></div><div class="card-body collapse show" id="-897825596"><pre class="htmlmixed card">
&lt;e:given&gt;
        &lt;e:db-set caption="Given widget:" table="widgets" cols="name, quantity, id=1, updated={{now}}"&gt;
            &lt;e:row&gt;widget1, 10&lt;/e:row&gt;
        &lt;/e:db-set&gt;
    &lt;/e:given&gt;
&lt;e:delete url="/widgets/1"&gt;
        &lt;e:case desc="Successful deletion"&gt;
            &lt;e:expected /&gt;
            &lt;e:check&gt;
                &lt;e:db-check caption="Widget was deleted:" table="widgets" /&gt;
            &lt;/e:check&gt;
        &lt;/e:case&gt;
        &lt;e:case desc="Absent widget deletion"&gt;
            &lt;e:expected statusCode="404" reasonPhrase="Not Found" /&gt;
        &lt;/e:case&gt;
    &lt;/e:delete&gt;</pre>
    <div cmdId="6ac67a80-6adb-4b15-ae48-51110bf92095" e:given="" class="bd-callout bd-callout-info">
        <table cmdId="92b32888-b9ba-44d4-87fd-6c7a12147f97" e:db-set="" class="table table-sm">
            
        <div></div><span></span><caption><i class="fa fa-database fa-pull-left fa-border"> Given widget:</i></caption><thead class="thead-default"><tr><th class="">name</th><th class="">quantity</th><th class="">id</th><th class="">updated</th></tr></thead><tbody><tr><td class=""><span>widget1</span></td><td class=""><span>10</span></td><td class=""><span>1</span></td><td class=""><span>2020-05-16 11:02:48.048</span></td></tr></tbody></table>
    </div>
    <div cmdId="b2bc14ef-ca6b-4a0e-b426-1de77640aa4e" e:delete="" class="bd-callout bd-callout-success"><table class="table table-sm"><thead class="thead-default"><thead class="thead-default"><th>Expected response</th><th>Status code</th></thead></thead>
        <tr desc="Successful deletion" cmdId="8ea00a4f-ff2d-4923-bea5-0b06e5bc7a15" e:case="" data-type="case" id="6) Successful deletion"><tr><td colspan="2" class="text-muted">6) Successful deletion</td></tr>
            
            <div cmdId="f5abbe41-36b0-4ad5-80a1-80024d1d80f2" e:check="" />
        <tr><tr><td colspan="2"><div><i>DELETE </i><code>/widgets/1</code><span></span></div></td></tr><td class="json rest-success"> </td><td class="rest-success">HTTP/1.1 200 OK</td></tr></tr><tr><td colspan="3">
                <table caption="Widget was deleted:" cmdId="3052252e-8490-4e71-94c9-23d435b73452" e:db-check="" class="table table-sm"><div></div><span></span><caption><i class="fa fa-database fa-pull-left fa-border"> Widget was deleted:</i></caption><thead class="thead-default"><tr /></thead><tr><td colspan="0" class="table-success">&lt;EMPTY&gt;</td></tr></table>
            </td></tr>
        <tr desc="Absent widget deletion" cmdId="c1d7e887-f685-417c-b946-05e45768d0b8" e:case="" data-type="case" id="7) Absent widget deletion"><tr><td colspan="2" class="text-muted">7) Absent widget deletion</td></tr>
            
        <tr><tr><td colspan="2"><div><i>DELETE </i><code>/widgets/1</code><span></span></div></td></tr><td class="json rest-success"> </td><td class="rest-success">HTTP/1.1 404 Not Found</td></tr></tr>
    <div><h4><span class="badge badge-success ml-1 mr-1">DELETE</span><span class="badge badge-info ml-1 mr-1">application/json</span><code>/widgets/1</code></h4></div></table></div>
</div><div class="card-footer text-muted" data-toggle="collapse" data-target="#-897825596" aria-expanded="true" aria-controls="-897825596"><small><span class="badge badge-pill badge-success">5</span><span class="badge badge-pill badge-secondary"></span><span class="badge badge-pill badge-warning"></span><span class="badge badge-pill badge-danger"></span></small></div></div>
<h3>Let's test widget retrieving API:</h3>
<div xmlns:c="http://www.concordion.org/2007/concordion" name="Successful widget retrieving" print="true" cmdId="599906c5-8424-4ddd-af69-4bc9ab55c844" c:example="Successful widget retrieving" class="card mb-3" e:example="" id="Successful widget retrieving"><div class="card-header" data-toggle="collapse" data-target="#1413626223" aria-expanded="true" aria-controls="1413626223"><a name="Successful widget retrieving" data-type="example">Successful widget retrieving</a></div><div class="card-body collapse show" id="1413626223"><pre class="htmlmixed card">
&lt;e:given&gt;
        &lt;e:set var="upd1" value="{{now tz='GMT+1'}}" /&gt;
        &lt;e:set var="upd2" value="{{now plus='1 day'}}" /&gt;
        &lt;e:set var="format" value="yyyy-MM-dd'T'HH:mm:ss.SSSZZ" /&gt;
        &lt;e:db-set caption="Given widgets:" table="widgets" cols="name, quantity, updated, id=1..10"&gt;
            &lt;e:row&gt;widget1, 10, {{upd1}}&lt;/e:row&gt;
            &lt;e:row&gt;widget2, 20, {{upd2}}&lt;/e:row&gt;
            &lt;e:row&gt;widget3, 30, {{date '01.02.2000 10:20+03:00' format="dd.MM.yyyy HH:mmZZ"}}&lt;/e:row&gt;
            &lt;e:row&gt;widget4, 40, {{date upd2 plus='12 h'}}&lt;/e:row&gt;
        &lt;/e:db-set&gt;
    &lt;/e:given&gt;
&lt;e:get url="/widgets"&gt;
        &lt;e:case desc="Can retrieve stored widgets"&gt;
            &lt;e:expected&gt;
                [{
                "id": 1,
                "name": "widget1",
                "quantity": 10,
                "updatedAt": "{{dateFormat upd1 format}}"
                }, {
                "id": 2,
                "name": "widget2",
                "quantity": 20,
                "updatedAt": "{{dateFormat upd2 format}}"
                }, {
                "id": 3,
                "name": "widget3",
                "quantity": 30,
                "updatedAt": "{{dateFormat (date '01.02.2000 10:20+03:00' format="dd.MM.yyyy HH:mmZZ") format}}"
                }, {
                "id": 4,
                "name": "widget4",
                "quantity": 40,
                "updatedAt": "{{dateFormat (date upd2 plus='12 h') format}}"
                }]
            &lt;/e:expected&gt;
        &lt;/e:case&gt;
    &lt;/e:get&gt;</pre>
    <div cmdId="a8bda505-fc1f-4d5d-bf95-8bce91ea86f2" e:given="" class="bd-callout bd-callout-info">
        <span var="upd1" value="{{now tz='GMT+1'}}" cmdId="c2122e9b-62b4-4950-b18b-cdea6a69c36d" e:set="" />
        <span var="upd2" value="{{now plus='1 day'}}" cmdId="477a3798-7bf1-476b-9a03-60fa9c125216" e:set="" />
        <span var="format" value="yyyy-MM-dd'T'HH:mm:ss.SSSZZ" cmdId="c25eee53-8c42-4df5-8f1f-756b9700f6cc" e:set="" />
        <table cmdId="494cc40d-277c-4b77-acba-283989c8cd97" e:db-set="" class="table table-sm">
            
            
            
            
        <div></div><span></span><caption><i class="fa fa-database fa-pull-left fa-border"> Given widgets:</i></caption><thead class="thead-default"><tr><th class="">name</th><th class="">quantity</th><th class="">updated</th><th class="">id</th></tr></thead><tbody><tr><td class=""><span>widget1</span></td><td class=""><span>10</span></td><td class=""><span>2020-05-16 10:02:48.048</span></td><td class=""><span>1</span></td></tr><tr><td class=""><span>widget2</span></td><td class=""><span>20</span></td><td class=""><span>2020-05-17 11:02:48.048</span></td><td class=""><span>2</span></td></tr><tr><td class=""><span>widget3</span></td><td class=""><span>30</span></td><td class=""><span>2000-02-01 07:20:00.000</span></td><td class=""><span>3</span></td></tr><tr><td class=""><span>widget4</span></td><td class=""><span>40</span></td><td class=""><span>2020-05-17 23:02:48.048</span></td><td class=""><span>4</span></td></tr></tbody></table>
    </div>
    <div cmdId="0e1bdc0f-9732-4004-9d90-aa30bb4d8d17" e:get="" class="bd-callout bd-callout-success"><table class="table table-sm"><thead class="thead-default"><thead class="thead-default"><th>Expected response</th><th>Status code</th></thead></thead>
        <tr desc="Can retrieve stored widgets" cmdId="dacf6fc7-4a82-49e8-801c-a08b31fe3b3b" e:case="" data-type="case" id="8) Can retrieve stored widgets"><tr><td colspan="2" class="text-muted">8) Can retrieve stored widgets</td></tr>
            
        <tr><tr><td colspan="2"><div><i>GET </i><code>/widgets</code><span></span></div></td></tr><td class="json rest-success">[{
  "id": 1,
  "name": "widget1",
  "quantity": 10,
  "updatedAt": "2020-05-16T10:02:48.773+00:00"
}, {
  "id": 2,
  "name": "widget2",
  "quantity": 20,
  "updatedAt": "2020-05-17T11:02:48.778+00:00"
}, {
  "id": 3,
  "name": "widget3",
  "quantity": 30,
  "updatedAt": "2000-02-01T07:20:00.000+00:00"
}, {
  "id": 4,
  "name": "widget4",
  "quantity": 40,
  "updatedAt": "2020-05-17T23:02:48.778+00:00"
}]</td><td class="rest-success">HTTP/1.1 200 OK</td></tr></tr>
    <div><h4><span class="badge badge-success ml-1 mr-1">GET</span><span class="badge badge-info ml-1 mr-1">application/json</span><code>/widgets</code></h4></div></table></div>
</div><div class="card-footer text-muted" data-toggle="collapse" data-target="#1413626223" aria-expanded="true" aria-controls="1413626223"><small><span class="badge badge-pill badge-success">2</span><span class="badge badge-pill badge-secondary"></span><span class="badge badge-pill badge-warning"></span><span class="badge badge-pill badge-danger"></span></small></div></div>
<br />
<h3>CRUD</h3>
<blockquote class="blockquote">
    <p class="mb-0">If graybox-style testing (with direct DB interactions) feels wrong to you, here is the example of blackbox one:</p>
</blockquote>
<div xmlns:c="http://www.concordion.org/2007/concordion" name="CRUD" print="true" cmdId="e7e88278-c3c9-4690-bfce-7f215c96f537" c:example="CRUD" class="card mb-3" e:example="" id="CRUD"><div class="card-header" data-toggle="collapse" data-target="#2077502" aria-expanded="true" aria-controls="2077502"><a name="CRUD" data-type="example">CRUD</a></div><div class="card-body collapse show" id="2077502"><pre class="htmlmixed card">
&lt;e:given&gt;&lt;e:db-set caption="Given no widgets:" table="widgets" /&gt;&lt;/e:given&gt;
&lt;e:post url="/widgets"&gt;
        &lt;e:case desc="Create"&gt;
            &lt;e:body&gt;{"name" : "widget1", "quantity": "10"}&lt;/e:body&gt;
            &lt;e:expected statusCode="201" reasonPhrase="Created"&gt;
                {
                "id": "{{number}}",
                "name": "widget1",
                "quantity": 10,
                "updatedAt": "{{string}}"
                }
            &lt;/e:expected&gt;
        &lt;/e:case&gt;
    &lt;/e:post&gt;
&lt;e:then&gt;
        &lt;e:set var="id" value="{{responseBody 'id'}}" /&gt;
        &lt;e:set var="updatedAt" value="{{responseBody 'updatedAt'}}" /&gt;
        Widget has id = &lt;code cc:echo="#id" /&gt; and updatedAt = &lt;code cc:echo="#updatedAt" /&gt;
    &lt;/e:then&gt;
&lt;e:get url="/widgets"&gt;
        &lt;e:case desc="Read"&gt;
            &lt;e:expected&gt;
                [{ "id": {{id}}, "name": "widget1", "quantity": 10, "updatedAt": "{{updatedAt}}" }]
            &lt;/e:expected&gt;
        &lt;/e:case&gt;
    &lt;/e:get&gt;
&lt;e:put url="/widgets"&gt;
        &lt;e:case desc="Update"&gt;
            &lt;e:body&gt;{"id": {{id}}, "name": "new name", "quantity": "0"}&lt;/e:body&gt;
            &lt;e:expected&gt;
                { "id": {{id}}, "name": "new name", "quantity": 0, "updatedAt": "{{formattedAndWithinNow "yyyy-MM-dd'T'HH:mm:ss.SSSZ" "5s"}}" }
            &lt;/e:expected&gt;
        &lt;/e:case&gt;
    &lt;/e:put&gt;
&lt;e:delete url="/widgets/{{id}}"&gt;
        &lt;e:case desc="Delete"&gt;
            &lt;e:expected /&gt;
        &lt;/e:case&gt;
    &lt;/e:delete&gt;</pre>
    <div cmdId="fd0a51ce-62d0-4dab-acb0-6b52e8a58722" e:given="" class="bd-callout bd-callout-info"><table cmdId="ccd9d619-582b-4ed4-a67a-d902beab1941" e:db-set="" class="table table-sm"><div></div><span></span><caption><i class="fa fa-database fa-pull-left fa-border"> Given no widgets:</i></caption><thead class="thead-default"><tr /></thead><tbody /></table></div>
    <div cmdId="ad78bb3b-044d-4bef-9bc2-026ca8c2d8ea" e:post="" class="bd-callout bd-callout-success"><table class="table table-sm"><thead class="thead-default"><thead class="thead-default"><th>Request</th><th>Expected response</th><th>Status code</th></thead></thead>
        <tr desc="Create" cmdId="cb4c64b3-a494-4739-a9c3-5b2cc4af5953" e:case="" data-type="case" id="9) Create"><tr><td colspan="3" class="text-muted">9) Create</td></tr>
            
            
        <tr><tr><td colspan="3"><div><i>POST </i><code>/widgets</code><span></span></div></td></tr><td class="json">{
  "name": "widget1",
  "quantity": "10"
}</td><td class="json rest-success">{
  "id": "${json-unit.any-number}",
  "name": "widget1",
  "quantity": 10,
  "updatedAt": "${json-unit.any-string}"
}</td><td class="rest-success">HTTP/1.1 201 Created</td></tr></tr>
    <div><h4><span class="badge badge-success ml-1 mr-1">POST</span><span class="badge badge-info ml-1 mr-1">application/json</span><code>/widgets</code></h4></div></table></div>
    <div cmdId="1e08319a-c9e0-4e8f-b166-026af8738696" e:then="" class="bd-callout bd-callout-success">
        <span var="id" value="{{responseBody 'id'}}" cmdId="38eab95e-14fb-4c0d-8261-66958464678f" e:set="" />
        <span var="updatedAt" value="{{responseBody 'updatedAt'}}" cmdId="397ac3e3-49c6-44ab-bdd9-548532ca9142" e:set="" />
        Widget has id = <code cc:echo="#id">5</code> and updatedAt = <code cc:echo="#updatedAt">2020-05-16T11:02:48.959+00:00</code>
    </div>
    <div cmdId="da7adf06-4aac-4486-9cfd-909745d92d5e" e:get="" class="bd-callout bd-callout-success"><table class="table table-sm"><thead class="thead-default"><thead class="thead-default"><th>Expected response</th><th>Status code</th></thead></thead>
        <tr desc="Read" cmdId="b679c051-214a-4b95-8157-a2ac2326c0af" e:case="" data-type="case" id="10) Read"><tr><td colspan="2" class="text-muted">10) Read</td></tr>
            
        <tr><tr><td colspan="2"><div><i>GET </i><code>/widgets</code><span></span></div></td></tr><td class="json rest-success">[{
  "id": 5,
  "name": "widget1",
  "quantity": 10,
  "updatedAt": "2020-05-16T11:02:48.959+00:00"
}]</td><td class="rest-success">HTTP/1.1 200 OK</td></tr></tr>
    <div><h4><span class="badge badge-success ml-1 mr-1">GET</span><span class="badge badge-info ml-1 mr-1">application/json</span><code>/widgets</code></h4></div></table></div>
    <div cmdId="829a1318-da9c-42e7-b60f-48fe01905692" e:put="" class="bd-callout bd-callout-success"><table class="table table-sm"><thead class="thead-default"><thead class="thead-default"><th>Request</th><th>Expected response</th><th>Status code</th></thead></thead>
        <tr desc="Update" cmdId="3887bdcb-85f4-4b3b-b290-f76e64f49365" e:case="" data-type="case" id="11) Update"><tr><td colspan="3" class="text-muted">11) Update</td></tr>
            
            
        <tr><tr><td colspan="3"><div><i>PUT </i><code>/widgets</code><span></span></div></td></tr><td class="json">{
  "id": 5,
  "name": "new name",
  "quantity": "0"
}</td><td class="json rest-success">{
  "id": 5,
  "name": "new name",
  "quantity": 0,
  "updatedAt": "${json-unit.matches:formattedAndWithinNow}[yyyy-MM-dd'T'HH:mm:ss.SSSZ][5s]"
}</td><td class="rest-success">HTTP/1.1 200 OK</td></tr></tr>
    <div><h4><span class="badge badge-success ml-1 mr-1">PUT</span><span class="badge badge-info ml-1 mr-1">application/json</span><code>/widgets</code></h4></div></table></div>
    <div cmdId="ec460805-8986-40ab-8673-c76e69a2ad16" e:delete="" class="bd-callout bd-callout-success"><table class="table table-sm"><thead class="thead-default"><thead class="thead-default"><th>Expected response</th><th>Status code</th></thead></thead>
        <tr desc="Delete" cmdId="3fe1b824-0db7-42d8-955c-8d1e715bdcdf" e:case="" data-type="case" id="12) Delete"><tr><td colspan="2" class="text-muted">12) Delete</td></tr>
            
        <tr><tr><td colspan="2"><div><i>DELETE </i><code>/widgets/5</code><span></span></div></td></tr><td class="json rest-success"> </td><td class="rest-success">HTTP/1.1 200 OK</td></tr></tr>
    <div><h4><span class="badge badge-success ml-1 mr-1">DELETE</span><span class="badge badge-info ml-1 mr-1">application/json</span><code>/widgets/5</code></h4></div></table></div>
</div><div class="card-footer text-muted" data-toggle="collapse" data-target="#2077502" aria-expanded="true" aria-controls="2077502"><small><span class="badge badge-pill badge-success">8</span><span class="badge badge-pill badge-secondary"></span><span class="badge badge-pill badge-warning"></span><span class="badge badge-pill badge-danger"></span></small></div></div>
<br />
<h3>Testing asynchronous behavior</h3>
<blockquote class="blockquote">
    <p class="mb-0">Assume we need to trigger a job and do checks only after it's finished:</p>
</blockquote>
<div xmlns:c="http://www.concordion.org/2007/concordion" name="Trigger job and poll result with custom method" print="true" cmdId="1f62c281-67a1-413b-a34e-b6aeda595af2" c:example="Trigger job and poll result with custom method" class="card mb-3" e:example="" id="Trigger job and poll result with custom method"><div class="card-header" data-toggle="collapse" data-target="#1782657164" aria-expanded="true" aria-controls="1782657164"><a name="Trigger job and poll result with custom method" data-type="example">Trigger job and poll result with custom method</a></div><div class="card-body collapse show" id="1782657164"><pre class="htmlmixed card">
&lt;e:post url="/jobs"&gt;
        &lt;e:case desc="Trigger job with some optional body"&gt;
            &lt;e:body&gt;{"name" : "value"}&lt;/e:body&gt;
            &lt;e:expected&gt;{"id" : "{{number}}" }&lt;/e:expected&gt;
        &lt;/e:case&gt;
    &lt;/e:post&gt;
&lt;e:when&gt;
        &lt;e:set var="id" value="{{responseBody 'id'}}" /&gt;
        &lt;e:await untilTrue="isDone(#id)" atMostSec="3" pollDelayMillis="500" pollIntervalMillis="1000" /&gt;
        Job &lt;code cc:echo="#id" /&gt; is finished.
    &lt;/e:when&gt;
&lt;e:then&gt;
        Now we can check result:
        &lt;e:db-check table="jobResult" cols="result" where="id={{id}}"&gt;
            &lt;e:row&gt;done&lt;/e:row&gt;
        &lt;/e:db-check&gt;
    &lt;/e:then&gt;</pre>
    <div cmdId="2aec48b4-a89f-4e7a-af4f-1244496f197c" e:post="" class="bd-callout bd-callout-success"><table class="table table-sm"><thead class="thead-default"><thead class="thead-default"><th>Request</th><th>Expected response</th><th>Status code</th></thead></thead>
        <tr desc="Trigger job with some optional body" cmdId="b5566ec7-d053-4fbc-b65b-3182e1a260ad" e:case="" data-type="case" id="13) Trigger job with some optional body"><tr><td colspan="3" class="text-muted">13) Trigger job with some optional body</td></tr>
            
            
        <tr><tr><td colspan="3"><div><i>POST </i><code>/jobs</code><span></span></div></td></tr><td class="json">{
  "name": "value"
}</td><td class="json rest-success">{
  "id": "${json-unit.any-number}"
}</td><td class="rest-success">HTTP/1.1 200 OK</td></tr></tr>
    <div><h4><span class="badge badge-success ml-1 mr-1">POST</span><span class="badge badge-info ml-1 mr-1">application/json</span><code>/jobs</code></h4></div></table></div>
    <div cmdId="14ce375a-6aab-41ec-baba-12c0cdbda688" e:when="" class="bd-callout bd-callout-warning">
        <span var="id" value="{{responseBody 'id'}}" cmdId="1a248cc7-ab78-4c37-b01e-f78aaff4077b" e:set="" />
        <span cmdId="89abf3fd-18f8-4517-9350-bd7ba4c60057" e:await="" />
        Job <code cc:echo="#id">1</code> is finished.
    </div>
    <div cmdId="989e5c7d-9543-4189-aadc-306f06de5717" e:then="" class="bd-callout bd-callout-success">
        Now we can check result:
        <table cmdId="fd096dd2-b323-42cc-99fc-a64e660d5ae4" e:db-check="" class="table table-sm">
            
        <div></div><span></span><caption><i class="fa fa-database fa-pull-left fa-border"> jobResult</i></caption><thead class="thead-default"><tr><th>result</th></tr></thead><tr><td class="table-success"> <span>done</span></td></tr></table>
    </div>
</div><div class="card-footer text-muted" data-toggle="collapse" data-target="#1782657164" aria-expanded="true" aria-controls="1782657164"><small><span class="badge badge-pill badge-success">3</span><span class="badge badge-pill badge-secondary"></span><span class="badge badge-pill badge-warning"></span><span class="badge badge-pill badge-danger"></span></small></div></div>
<blockquote class="blockquote">
    <p class="mb-0">Equivalent of previous example with explicit http polling:</p>
</blockquote>
<div xmlns:c="http://www.concordion.org/2007/concordion" name="Trigger job and poll result with http request" print="true" cmdId="4228d1ef-4a88-4f89-81b5-ec3acafd0e1e" c:example="Trigger job and poll result with http request" class="card mb-3" e:example="" id="Trigger job and poll result with http request"><div class="card-header" data-toggle="collapse" data-target="#51349339" aria-expanded="true" aria-controls="51349339"><a name="Trigger job and poll result with http request" data-type="example">Trigger job and poll result with http request</a></div><div class="card-body collapse show" id="51349339"><pre class="htmlmixed card">
&lt;e:when&gt;
        Trigger job on &lt;code cc:set="#url"&gt;/jobs&lt;/code&gt; with some optional body &lt;code cc:set="#json"&gt;{"name" : "value"}&lt;/code&gt;
        &lt;e:await untilHttpPost="{{url}}" hasStatusCode="200"&gt;{{json}}&lt;/e:await&gt;
        &lt;e:set var="id" value="{{responseBody 'id'}}" /&gt;
        and wait until it's finished.
        &lt;e:await untilHttpGet="/jobs/{{id}}" hasBodyFrom="/data/getting-started/job-finished.json" /&gt;
        Job id = &lt;code cc:echo="#id" /&gt;
    &lt;/e:when&gt;
&lt;e:then&gt;
        Now we can check result:
        &lt;e:db-check table="jobResult" cols="result" where="id={{id}}"&gt;
            &lt;e:row&gt;done&lt;/e:row&gt;
        &lt;/e:db-check&gt;
    &lt;/e:then&gt;</pre>
    <div cmdId="525e93bb-de4c-4384-b94f-9f5476976599" e:when="" class="bd-callout bd-callout-warning">
        Trigger job on <code cc:set="#url">/jobs</code> with some optional body <code cc:set="#json">{"name" : "value"}</code>
        <span cmdId="52190efa-45a6-4be7-8e0a-6d70c471e416" e:await="" />
        <span var="id" value="{{responseBody 'id'}}" cmdId="739f02bf-d0dd-4eda-a2b4-1421f44040c3" e:set="" />
        and wait until it's finished.
        <span cmdId="b2ae0a2c-7409-490e-ab3a-8bcdbca3ac8d" e:await="" />
        Job id = <code cc:echo="#id">2</code>
    </div>
    <div cmdId="dd4a4563-dc3d-4444-9fc8-44423ac9d8ba" e:then="" class="bd-callout bd-callout-success">
        Now we can check result:
        <table cmdId="cf529005-465f-490d-9ede-46557860ca51" e:db-check="" class="table table-sm">
            
        <div></div><span></span><caption><i class="fa fa-database fa-pull-left fa-border"> jobResult</i></caption><thead class="thead-default"><tr><th>result</th></tr></thead><tr><td class="table-success"> <span>done</span></td></tr></table>
    </div>
</div><div class="card-footer text-muted" data-toggle="collapse" data-target="#51349339" aria-expanded="true" aria-controls="51349339"><small><span class="badge badge-pill badge-success">1</span><span class="badge badge-pill badge-secondary"></span><span class="badge badge-pill badge-warning"></span><span class="badge badge-pill badge-danger"></span></small></div></div>
<blockquote class="blockquote">
    <p class="mb-0">Equivalent of previous example with awaiting by db-check:</p>
</blockquote>
<div xmlns:c="http://www.concordion.org/2007/concordion" name="Trigger job and poll result with db-check" print="true" cmdId="a7a8c99c-33ea-4437-95eb-925e02d31e4d" c:example="Trigger job and poll result with db-check" class="card mb-3" e:example="" id="Trigger job and poll result with db-check"><div class="card-header" data-toggle="collapse" data-target="#1980823901" aria-expanded="true" aria-controls="1980823901"><a name="Trigger job and poll result with db-check" data-type="example">Trigger job and poll result with db-check</a></div><div class="card-body collapse show" id="1980823901"><pre class="htmlmixed card">
&lt;e:when&gt;
        Trigger job on &lt;code cc:set="#url"&gt;/jobs&lt;/code&gt; with some optional body &lt;code cc:set="#json"&gt;{"name" : "value"}&lt;/code&gt;
        &lt;e:await untilHttpPost="{{url}}" hasStatusCode="200"&gt;{{json}}&lt;/e:await&gt;
        &lt;e:set var="id" value="{{responseBody 'id'}}" /&gt;
        Job id = &lt;code cc:echo="#id" /&gt;
    &lt;/e:when&gt;
&lt;e:then&gt;
        Await for result:
        &lt;e:db-check table="jobResult" cols="result" where="id={{id}}" awaitAtMostSec="4"&gt;
            &lt;e:row&gt;done&lt;/e:row&gt;
        &lt;/e:db-check&gt;
    &lt;/e:then&gt;</pre>
    <div cmdId="47ee8ab8-4922-4594-b78a-23e6b88d3788" e:when="" class="bd-callout bd-callout-warning">
        Trigger job on <code cc:set="#url">/jobs</code> with some optional body <code cc:set="#json">{"name" : "value"}</code>
        <span cmdId="79bdccfb-e5b2-4e1b-b1f6-6141cc7b5bce" e:await="" />
        <span var="id" value="{{responseBody 'id'}}" cmdId="9439ecca-e56b-4b45-a278-9240e049b1fa" e:set="" />
        Job id = <code cc:echo="#id">3</code>
    </div>
    <div cmdId="b7c7e310-7943-46ea-867d-d7a6a2dca1e2" e:then="" class="bd-callout bd-callout-success">
        Await for result:
        <table cmdId="e3c5d4c5-7808-4c51-b0b7-bfa169288c4e" e:db-check="" class="table table-sm">
            
        <div></div><span></span><caption><i class="fa fa-database fa-pull-left fa-border"> jobResult</i></caption><thead class="thead-default"><tr><th>result</th></tr></thead><tr><td class="table-success"> <span>done</span></td></tr></table>
    </div>
</div><div class="card-footer text-muted" data-toggle="collapse" data-target="#1980823901" aria-expanded="true" aria-controls="1980823901"><small><span class="badge badge-pill badge-success">1</span><span class="badge badge-pill badge-secondary"></span><span class="badge badge-pill badge-warning"></span><span class="badge badge-pill badge-danger"></span></small></div></div>
<div class="footer">Results generated by <a href="http://www.concordion.org" style="font-weight: bold; text-decoration: none; color: #89C;">Concordion</a><div class="testTime">in 13859 ms on 16-May-2020 at 11:02:56 UTC</div></div></body>
<button id="btnToTop" onclick="topFunction()" type="button" class="btn btn-light btn-sm text-muted ml-1"><i class="fa fa-arrow-up fa-3x"></i></button></html>